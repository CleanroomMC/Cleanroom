--- before/net/minecraft/entity/EntityLivingBase.java
+++ after/net/minecraft/entity/EntityLivingBase.java
@@ -81,17 +81,18 @@
 {
     private static final Logger field_190632_a = LogManager.getLogger();
     private static final UUID field_110156_b = UUID.fromString("662A6B8D-DA3E-4C1C-8813-96EA6097278D");
-    private static final AttributeModifier field_110157_c = new AttributeModifier(field_110156_b, "Sprinting speed boost", 0.3F, 2).func_111168_a(false);
-    protected static final DataParameter<Byte> field_184621_as = EntityDataManager.func_187226_a(EntityLivingBase.class, DataSerializers.field_187191_a);
-    private static final DataParameter<Float> field_184632_c = EntityDataManager.func_187226_a(EntityLivingBase.class, DataSerializers.field_187193_c);
-    private static final DataParameter<Integer> field_184633_f = EntityDataManager.func_187226_a(EntityLivingBase.class, DataSerializers.field_187192_b);
-    private static final DataParameter<Boolean> field_184634_g = EntityDataManager.func_187226_a(EntityLivingBase.class, DataSerializers.field_187198_h);
-    private static final DataParameter<Integer> field_184635_h = EntityDataManager.func_187226_a(EntityLivingBase.class, DataSerializers.field_187192_b);
+    private static final AttributeModifier field_110157_c = (new AttributeModifier(field_110156_b, "Sprinting speed boost", 0.30000001192092896D, 2)).func_111168_a(false);
+    public static final net.minecraft.entity.ai.attributes.IAttribute SWIM_SPEED = new net.minecraft.entity.ai.attributes.RangedAttribute(null, "forge.swimSpeed", 1.0D, 0.0D, 1024.0D).func_111112_a(true);
+    protected static final DataParameter<Byte> field_184621_as = EntityDataManager.<Byte>func_187226_a(EntityLivingBase.class, DataSerializers.field_187191_a);
+    private static final DataParameter<Float> field_184632_c = EntityDataManager.<Float>func_187226_a(EntityLivingBase.class, DataSerializers.field_187193_c);
+    private static final DataParameter<Integer> field_184633_f = EntityDataManager.<Integer>func_187226_a(EntityLivingBase.class, DataSerializers.field_187192_b);
+    private static final DataParameter<Boolean> field_184634_g = EntityDataManager.<Boolean>func_187226_a(EntityLivingBase.class, DataSerializers.field_187198_h);
+    private static final DataParameter<Integer> field_184635_h = EntityDataManager.<Integer>func_187226_a(EntityLivingBase.class, DataSerializers.field_187192_b);
     private AbstractAttributeMap field_110155_d;
     private final CombatTracker field_94063_bt = new CombatTracker(this);
-    private final Map<Potion, PotionEffect> field_70713_bf = Maps.newHashMap();
-    private final NonNullList<ItemStack> field_184630_bs = NonNullList.func_191197_a(2, ItemStack.field_190927_a);
-    private final NonNullList<ItemStack> field_184631_bt = NonNullList.func_191197_a(4, ItemStack.field_190927_a);
+    private final Map<Potion, PotionEffect> field_70713_bf = Maps.<Potion, PotionEffect>newHashMap();
+    private final NonNullList<ItemStack> field_184630_bs = NonNullList.<ItemStack>func_191197_a(2, ItemStack.field_190927_a);
+    private final NonNullList<ItemStack> field_184631_bt = NonNullList.<ItemStack>func_191197_a(4, ItemStack.field_190927_a);
     public boolean field_82175_bq;
     public EnumHand field_184622_au;
     public int field_110158_av;
@@ -153,7 +154,6 @@
     private DamageSource field_189750_bF;
     private long field_189751_bG;
 
-    @Override
     public void func_174812_G()
     {
         this.func_70097_a(DamageSource.field_76380_i, Float.MAX_VALUE);
@@ -165,22 +165,21 @@
         this.func_110147_ax();
         this.func_70606_j(this.func_110138_aP());
         this.field_70156_m = true;
-        this.field_70770_ap = (float)((Math.random() + 1.0) * 0.01F);
+        this.field_70770_ap = (float)((Math.random() + 1.0D) * 0.009999999776482582D);
         this.func_70107_b(this.field_70165_t, this.field_70163_u, this.field_70161_v);
         this.field_70769_ao = (float)Math.random() * 12398.0F;
-        this.field_70177_z = (float)(Math.random() * (float)(Math.PI * 2));
+        this.field_70177_z = (float)(Math.random() * (Math.PI * 2D));
         this.field_70759_as = this.field_70177_z;
         this.field_70138_W = 0.6F;
     }
 
-    @Override
     protected void func_70088_a()
     {
-        this.field_70180_af.func_187214_a(field_184621_as, (byte)0);
-        this.field_70180_af.func_187214_a(field_184633_f, 0);
-        this.field_70180_af.func_187214_a(field_184634_g, false);
-        this.field_70180_af.func_187214_a(field_184635_h, 0);
-        this.field_70180_af.func_187214_a(field_184632_c, 1.0F);
+        this.field_70180_af.func_187214_a(field_184621_as, Byte.valueOf((byte)0));
+        this.field_70180_af.func_187214_a(field_184633_f, Integer.valueOf(0));
+        this.field_70180_af.func_187214_a(field_184634_g, Boolean.valueOf(false));
+        this.field_70180_af.func_187214_a(field_184635_h, Integer.valueOf(0));
+        this.field_70180_af.func_187214_a(field_184632_c, Float.valueOf(1.0F));
     }
 
     protected void func_110147_ax()
@@ -190,9 +189,9 @@
         this.func_110140_aT().func_111150_b(SharedMonsterAttributes.field_111263_d);
         this.func_110140_aT().func_111150_b(SharedMonsterAttributes.field_188791_g);
         this.func_110140_aT().func_111150_b(SharedMonsterAttributes.field_189429_h);
+        this.func_110140_aT().func_111150_b(SWIM_SPEED);
     }
 
-    @Override
     protected void func_184231_a(double p_184231_1_, boolean p_184231_3_, IBlockState p_184231_4_, BlockPos p_184231_5_)
     {
         if (!this.func_70090_H())
@@ -204,23 +203,12 @@
         {
             float f = (float)MathHelper.func_76123_f(this.field_70143_R - 3.0F);
 
-            if (p_184231_4_.func_185904_a() != Material.field_151579_a)
+            if (!p_184231_4_.func_177230_c().isAir(p_184231_4_, field_70170_p, p_184231_5_))
             {
-                double d0 = Math.min((double)(0.2F + f / 15.0F), 2.5);
-                int i = (int)(150.0 * d0);
-                ((WorldServer)this.field_70170_p)
-                .func_175739_a(
-                    EnumParticleTypes.BLOCK_DUST,
-                    this.field_70165_t,
-                    this.field_70163_u,
-                    this.field_70161_v,
-                    i,
-                    0.0,
-                    0.0,
-                    0.0,
-                    0.15F,
-                    Block.func_176210_f(p_184231_4_)
-                );
+                double d0 = Math.min((double)(0.2F + f / 15.0F), 2.5D);
+                int i = (int)(150.0D * d0);
+                if (!p_184231_4_.func_177230_c().addLandingEffects(p_184231_4_, (WorldServer)this.field_70170_p, p_184231_5_, p_184231_4_, this, i))
+                ((WorldServer)this.field_70170_p).func_175739_a(EnumParticleTypes.BLOCK_DUST, this.field_70165_t, this.field_70163_u, this.field_70161_v, i, 0.0D, 0.0D, 0.0D, 0.15000000596046448D, Block.func_176210_f(p_184231_4_));
             }
         }
 
@@ -232,7 +220,6 @@
         return false;
     }
 
-    @Override
     public void func_70030_z()
     {
         this.field_70732_aI = this.field_70733_aJ;
@@ -250,11 +237,11 @@
             {
                 double d0 = this.field_70170_p.func_175723_af().func_177745_a(this) + this.field_70170_p.func_175723_af().func_177742_m();
 
-                if (d0 < 0.0)
+                if (d0 < 0.0D)
                 {
                     double d1 = this.field_70170_p.func_175723_af().func_177727_n();
 
-                    if (d1 > 0.0)
+                    if (d1 > 0.0D)
                     {
                         this.func_70097_a(DamageSource.field_76368_d, (float)Math.max(1, MathHelper.func_76128_c(-d0 * d1)));
                     }
@@ -290,23 +277,14 @@
                             float f2 = this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat();
                             float f = this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat();
                             float f1 = this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat();
-                            this.field_70170_p
-                            .func_175688_a(
-                                EnumParticleTypes.WATER_BUBBLE,
-                                this.field_70165_t + (double)f2,
-                                this.field_70163_u + (double)f,
-                                this.field_70161_v + (double)f1,
-                                this.field_70159_w,
-                                this.field_70181_x,
-                                this.field_70179_y
-                            );
+                            this.field_70170_p.func_175688_a(EnumParticleTypes.WATER_BUBBLE, this.field_70165_t + (double)f2, this.field_70163_u + (double)f, this.field_70161_v + (double)f1, this.field_70159_w, this.field_70181_x, this.field_70179_y);
                         }
 
                         this.func_70097_a(DamageSource.field_76369_e, 2.0F);
                     }
                 }
 
-                if (!this.field_70170_p.field_72995_K && this.func_184218_aH() && this.func_184187_bx() instanceof EntityLivingBase)
+                if (!this.field_70170_p.field_72995_K && this.func_184218_aH() && this.func_184187_bx() != null && this.func_184187_bx().shouldDismountInWater(this))
                 {
                     this.func_184210_p();
                 }
@@ -364,11 +342,11 @@
         {
             if (!this.field_70755_b.func_70089_S())
             {
-                this.func_70604_c(null);
+                this.func_70604_c((EntityLivingBase)null);
             }
             else if (this.field_70173_aa - this.field_70756_c > 100)
             {
-                this.func_70604_c(null);
+                this.func_70604_c((EntityLivingBase)null);
             }
         }
 
@@ -402,11 +380,10 @@
 
         if (this.field_70725_aQ == 20)
         {
-            if (!this.field_70170_p.field_72995_K
-                    && (this.func_70684_aJ() || this.field_70718_bc > 0 && this.func_146066_aG() && this.field_70170_p.func_82736_K().func_82766_b("doMobLoot")))
+            if (!this.field_70170_p.field_72995_K && (this.func_70684_aJ() || this.field_70718_bc > 0 && this.func_146066_aG() && this.field_70170_p.func_82736_K().func_82766_b("doMobLoot")))
             {
                 int i = this.func_70693_a(this.field_70717_bb);
-
+                i = net.minecraftforge.event.ForgeEventFactory.getExperienceDrop(this, this.field_70717_bb, i);
                 while (i > 0)
                 {
                     int j = EntityXPOrb.func_70527_a(i);
@@ -419,19 +396,10 @@
 
             for (int k = 0; k < 20; ++k)
             {
-                double d2 = this.field_70146_Z.nextGaussian() * 0.02;
-                double d0 = this.field_70146_Z.nextGaussian() * 0.02;
-                double d1 = this.field_70146_Z.nextGaussian() * 0.02;
-                this.field_70170_p
-                .func_175688_a(
-                    EnumParticleTypes.EXPLOSION_NORMAL,
-                    this.field_70165_t + (double)(this.field_70146_Z.nextFloat() * this.field_70130_N * 2.0F) - (double)this.field_70130_N,
-                    this.field_70163_u + (double)(this.field_70146_Z.nextFloat() * this.field_70131_O),
-                    this.field_70161_v + (double)(this.field_70146_Z.nextFloat() * this.field_70130_N * 2.0F) - (double)this.field_70130_N,
-                    d2,
-                    d0,
-                    d1
-                );
+                double d2 = this.field_70146_Z.nextGaussian() * 0.02D;
+                double d0 = this.field_70146_Z.nextGaussian() * 0.02D;
+                double d1 = this.field_70146_Z.nextGaussian() * 0.02D;
+                this.field_70170_p.func_175688_a(EnumParticleTypes.EXPLOSION_NORMAL, this.field_70165_t + (double)(this.field_70146_Z.nextFloat() * this.field_70130_N * 2.0F) - (double)this.field_70130_N, this.field_70163_u + (double)(this.field_70146_Z.nextFloat() * this.field_70131_O), this.field_70161_v + (double)(this.field_70146_Z.nextFloat() * this.field_70130_N * 2.0F) - (double)this.field_70130_N, d2, d0, d1);
             }
         }
     }
@@ -528,7 +496,6 @@
         }
     }
 
-    @Override
     public void func_70014_b(NBTTagCompound p_70014_1_)
     {
         p_70014_1_.func_74776_a("Health", this.func_110143_aJ());
@@ -574,7 +541,6 @@
         p_70014_1_.func_74757_a("FallFlying", this.func_184613_cA());
     }
 
-    @Override
     public void func_70037_a(NBTTagCompound p_70037_1_)
     {
         this.func_110149_m(p_70037_1_.func_74760_g("AbsorptionAmount"));
@@ -639,7 +605,7 @@
 
                 if (!potioneffect.func_76455_a(this))
                 {
-                    if (!this.field_70170_p.field_72995_K)
+                    if (!this.field_70170_p.field_72995_K && !net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.living.PotionEvent.PotionExpiryEvent(this, potioneffect)))
                     {
                         iterator.remove();
                         this.func_70688_c(potioneffect);
@@ -651,8 +617,9 @@
                 }
             }
         }
-        catch (ConcurrentModificationException concurrentmodificationexception)
+        catch (ConcurrentModificationException var11)
         {
+            ;
         }
 
         if (this.field_70752_e)
@@ -665,8 +632,8 @@
             this.field_70752_e = false;
         }
 
-        int i = this.field_70180_af.func_187225_a(field_184633_f);
-        boolean flag1 = this.field_70180_af.func_187225_a(field_184634_g);
+        int i = ((Integer)this.field_70180_af.func_187225_a(field_184633_f)).intValue();
+        boolean flag1 = ((Boolean)this.field_70180_af.func_187225_a(field_184634_g)).booleanValue();
 
         if (i > 0)
         {
@@ -688,19 +655,10 @@
 
             if (flag && i > 0)
             {
-                double d0 = (double)(i >> 16 & 0xFF) / 255.0;
-                double d1 = (double)(i >> 8 & 0xFF) / 255.0;
-                double d2 = (double)(i >> 0 & 0xFF) / 255.0;
-                this.field_70170_p
-                .func_175688_a(
-                    flag1 ? EnumParticleTypes.SPELL_MOB_AMBIENT : EnumParticleTypes.SPELL_MOB,
-                    this.field_70165_t + (this.field_70146_Z.nextDouble() - 0.5) * (double)this.field_70130_N,
-                    this.field_70163_u + this.field_70146_Z.nextDouble() * (double)this.field_70131_O,
-                    this.field_70161_v + (this.field_70146_Z.nextDouble() - 0.5) * (double)this.field_70130_N,
-                    d0,
-                    d1,
-                    d2
-                );
+                double d0 = (double)(i >> 16 & 255) / 255.0D;
+                double d1 = (double)(i >> 8 & 255) / 255.0D;
+                double d2 = (double)(i >> 0 & 255) / 255.0D;
+                this.field_70170_p.func_175688_a(flag1 ? EnumParticleTypes.SPELL_MOB_AMBIENT : EnumParticleTypes.SPELL_MOB, this.field_70165_t + (this.field_70146_Z.nextDouble() - 0.5D) * (double)this.field_70130_N, this.field_70163_u + this.field_70146_Z.nextDouble() * (double)this.field_70131_O, this.field_70161_v + (this.field_70146_Z.nextDouble() - 0.5D) * (double)this.field_70130_N, d0, d1, d2);
             }
         }
     }
@@ -715,8 +673,10 @@
         else
         {
             Collection<PotionEffect> collection = this.field_70713_bf.values();
-            this.field_70180_af.func_187227_b(field_184634_g, func_184593_a(collection));
-            this.field_70180_af.func_187227_b(field_184633_f, PotionUtils.func_185181_a(collection));
+            net.minecraftforge.event.entity.living.PotionColorCalculationEvent event = new net.minecraftforge.event.entity.living.PotionColorCalculationEvent(this, PotionUtils.func_185181_a(collection), func_184593_a(collection), collection);
+            net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(event);
+            this.field_70180_af.func_187227_b(field_184634_g, event.areParticlesHidden());
+            this.field_70180_af.func_187227_b(field_184633_f, event.getColor());
             this.func_82142_c(this.func_70644_a(MobEffects.field_76441_p));
         }
     }
@@ -736,8 +696,8 @@
 
     protected void func_175133_bi()
     {
-        this.field_70180_af.func_187227_b(field_184634_g, false);
-        this.field_70180_af.func_187227_b(field_184633_f, 0);
+        this.field_70180_af.func_187227_b(field_184634_g, Boolean.valueOf(false));
+        this.field_70180_af.func_187227_b(field_184633_f, Integer.valueOf(0));
     }
 
     public void func_70674_bp()
@@ -748,7 +708,10 @@
 
             while (iterator.hasNext())
             {
-                this.func_70688_c(iterator.next());
+                PotionEffect effect = iterator.next();
+                if(net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.living.PotionEvent.PotionRemoveEvent(this, effect))) continue;
+
+                this.func_70688_c(effect);
                 iterator.remove();
             }
         }
@@ -781,6 +744,7 @@
         {
             PotionEffect potioneffect = this.field_70713_bf.get(p_70690_1_.func_188419_a());
 
+            net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.living.PotionEvent.PotionAddedEvent(this, potioneffect, p_70690_1_));
             if (potioneffect == null)
             {
                 this.field_70713_bf.put(p_70690_1_.func_188419_a(), p_70690_1_);
@@ -796,6 +760,9 @@
 
     public boolean func_70687_e(PotionEffect p_70687_1_)
     {
+        net.minecraftforge.event.entity.living.PotionEvent.PotionApplicableEvent event = new net.minecraftforge.event.entity.living.PotionEvent.PotionApplicableEvent(this, p_70687_1_);
+        net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(event);
+        if (event.getResult() != net.minecraftforge.fml.common.eventhandler.Event.Result.DEFAULT) return event.getResult() == net.minecraftforge.fml.common.eventhandler.Event.Result.ALLOW;
         if (this.func_70668_bt() == EnumCreatureAttribute.UNDEAD)
         {
             Potion potion = p_70687_1_.func_188419_a();
@@ -822,6 +789,7 @@
 
     public void func_184589_d(Potion p_184589_1_)
     {
+        if(net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.living.PotionEvent.PotionRemoveEvent(this, p_184589_1_))) return;
         PotionEffect potioneffect = this.func_184596_c(p_184589_1_);
 
         if (potioneffect != null)
@@ -864,6 +832,8 @@
 
     public void func_70691_i(float p_70691_1_)
     {
+        p_70691_1_ = net.minecraftforge.event.ForgeEventFactory.onLivingHeal(this, p_70691_1_);
+        if (p_70691_1_ <= 0) return;
         float f = this.func_110143_aJ();
 
         if (f > 0.0F)
@@ -874,17 +844,17 @@
 
     public final float func_110143_aJ()
     {
-        return this.field_70180_af.func_187225_a(field_184632_c);
+        return ((Float)this.field_70180_af.func_187225_a(field_184632_c)).floatValue();
     }
 
     public void func_70606_j(float p_70606_1_)
     {
-        this.field_70180_af.func_187227_b(field_184632_c, MathHelper.func_76131_a(p_70606_1_, 0.0F, this.func_110138_aP()));
+        this.field_70180_af.func_187227_b(field_184632_c, Float.valueOf(MathHelper.func_76131_a(p_70606_1_, 0.0F, this.func_110138_aP())));
     }
 
-    @Override
     public boolean func_70097_a(DamageSource p_70097_1_, float p_70097_2_)
     {
+        if (!net.minecraftforge.common.ForgeHooks.onLivingAttack(this, p_70097_1_, p_70097_2_)) return false;
         if (this.func_180431_b(p_70097_1_))
         {
             return false;
@@ -909,8 +879,7 @@
             {
                 float f = p_70097_2_;
 
-                if ((p_70097_1_ == DamageSource.field_82728_o || p_70097_1_ == DamageSource.field_82729_p)
-                        && !this.func_184582_a(EntityEquipmentSlot.HEAD).func_190926_b())
+                if ((p_70097_1_ == DamageSource.field_82728_o || p_70097_1_ == DamageSource.field_82729_p) && !this.func_184582_a(EntityEquipmentSlot.HEAD).func_190926_b())
                 {
                     this.func_184582_a(EntityEquipmentSlot.HEAD).func_77972_a((int)(p_70097_2_ * 4.0F + this.field_70146_Z.nextFloat() * p_70097_2_ * 2.0F), this);
                     p_70097_2_ *= 0.75F;
@@ -974,9 +943,9 @@
                         this.field_70718_bc = 100;
                         this.field_70717_bb = (EntityPlayer)entity1;
                     }
-                    else if (entity1 instanceof EntityWolf)
+                    else if (entity1 instanceof net.minecraft.entity.passive.EntityTameable)
                     {
-                        EntityWolf entitywolf = (EntityWolf)entity1;
+                        net.minecraft.entity.passive.EntityTameable entitywolf = (net.minecraft.entity.passive.EntityTameable)entity1;
 
                         if (entitywolf.func_70909_n())
                         {
@@ -1026,17 +995,17 @@
                         double d1 = entity1.field_70165_t - this.field_70165_t;
                         double d0;
 
-                        for (d0 = entity1.field_70161_v - this.field_70161_v; d1 * d1 + d0 * d0 < 1.0E-4; d0 = (Math.random() - Math.random()) * 0.01)
+                        for (d0 = entity1.field_70161_v - this.field_70161_v; d1 * d1 + d0 * d0 < 1.0E-4D; d0 = (Math.random() - Math.random()) * 0.01D)
                         {
-                            d1 = (Math.random() - Math.random()) * 0.01;
+                            d1 = (Math.random() - Math.random()) * 0.01D;
                         }
 
-                        this.field_70739_aP = (float)(MathHelper.func_181159_b(d0, d1) * 180.0F / (float)Math.PI - (double)this.field_70177_z);
+                        this.field_70739_aP = (float)(MathHelper.func_181159_b(d0, d1) * (180D / Math.PI) - (double)this.field_70177_z);
                         this.func_70653_a(entity1, 0.4F, d1, d0);
                     }
                     else
                     {
-                        this.field_70739_aP = (float)((int)(Math.random() * 2.0) * 180);
+                        this.field_70739_aP = (float)((int)(Math.random() * 2.0D) * 180);
                     }
                 }
 
@@ -1160,9 +1129,9 @@
             {
                 Vec3d vec3d1 = this.func_70676_i(1.0F);
                 Vec3d vec3d2 = vec3d.func_72444_a(new Vec3d(this.field_70165_t, this.field_70163_u, this.field_70161_v)).func_72432_b();
-                vec3d2 = new Vec3d(vec3d2.field_72450_a, 0.0, vec3d2.field_72449_c);
+                vec3d2 = new Vec3d(vec3d2.field_72450_a, 0.0D, vec3d2.field_72449_c);
 
-                if (vec3d2.func_72430_b(vec3d1) < 0.0)
+                if (vec3d2.func_72430_b(vec3d1) < 0.0D)
                 {
                     return true;
                 }
@@ -1174,34 +1143,29 @@
 
     public void func_70669_a(ItemStack p_70669_1_)
     {
-        this.func_184185_a(SoundEvents.field_187635_cQ, 0.8F, 0.8F + this.field_70170_p.field_73012_v.nextFloat() * 0.4F);
+        this.field_70170_p.func_184148_a(null, this.field_70165_t, this.field_70163_u, this.field_70161_v, SoundEvents.field_187635_cQ, this.func_184176_by(), 0.8F, 0.8F + this.field_70170_p.field_73012_v.nextFloat() * 0.4F); //Forge: Fix MC-2518 Items are not damaged on the client so client needs packet as well.
 
         for (int i = 0; i < 5; ++i)
         {
-            Vec3d vec3d = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5) * 0.1, Math.random() * 0.1 + 0.1, 0.0);
-            vec3d = vec3d.func_178789_a(-this.field_70125_A * (float)(Math.PI / 180.0));
-            vec3d = vec3d.func_178785_b(-this.field_70177_z * (float)(Math.PI / 180.0));
-            double d0 = (double)(-this.field_70146_Z.nextFloat()) * 0.6 - 0.3;
-            Vec3d vec3d1 = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5) * 0.3, d0, 0.6);
-            vec3d1 = vec3d1.func_178789_a(-this.field_70125_A * (float)(Math.PI / 180.0));
-            vec3d1 = vec3d1.func_178785_b(-this.field_70177_z * (float)(Math.PI / 180.0));
+            Vec3d vec3d = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5D) * 0.1D, Math.random() * 0.1D + 0.1D, 0.0D);
+            vec3d = vec3d.func_178789_a(-this.field_70125_A * 0.017453292F);
+            vec3d = vec3d.func_178785_b(-this.field_70177_z * 0.017453292F);
+            double d0 = (double)(-this.field_70146_Z.nextFloat()) * 0.6D - 0.3D;
+            Vec3d vec3d1 = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5D) * 0.3D, d0, 0.6D);
+            vec3d1 = vec3d1.func_178789_a(-this.field_70125_A * 0.017453292F);
+            vec3d1 = vec3d1.func_178785_b(-this.field_70177_z * 0.017453292F);
             vec3d1 = vec3d1.func_72441_c(this.field_70165_t, this.field_70163_u + (double)this.func_70047_e(), this.field_70161_v);
-            this.field_70170_p
-            .func_175688_a(
-                EnumParticleTypes.ITEM_CRACK,
-                vec3d1.field_72450_a,
-                vec3d1.field_72448_b,
-                vec3d1.field_72449_c,
-                vec3d.field_72450_a,
-                vec3d.field_72448_b + 0.05,
-                vec3d.field_72449_c,
-                Item.func_150891_b(p_70669_1_.func_77973_b())
-            );
+            if (this.field_70170_p instanceof WorldServer) //Forge: Fix MC-2518 spawnParticle is nooped on server, need to use server specific variant
+                ((WorldServer)this.field_70170_p).func_175739_a(EnumParticleTypes.ITEM_CRACK, vec3d1.field_72450_a, vec3d1.field_72448_b, vec3d1.field_72449_c, 0,  vec3d.field_72450_a, vec3d.field_72448_b + 0.05D, vec3d.field_72449_c, 0.0D, Item.func_150891_b(p_70669_1_.func_77973_b()), p_70669_1_.func_77960_j());
+            else //Fix the fact that spawning ItemCrack uses TWO arguments.
+                this.field_70170_p.func_175688_a(EnumParticleTypes.ITEM_CRACK, vec3d1.field_72450_a, vec3d1.field_72448_b, vec3d1.field_72449_c, vec3d.field_72450_a, vec3d.field_72448_b + 0.05D, vec3d.field_72449_c, Item.func_150891_b(p_70669_1_.func_77973_b()), p_70669_1_.func_77960_j());
+
         }
     }
 
     public void func_70645_a(DamageSource p_70645_1_)
     {
+        if (net.minecraftforge.common.ForgeHooks.onLivingDeath(this, p_70645_1_)) return;
         if (!this.field_70729_aU)
         {
             Entity entity = p_70645_1_.func_76346_g();
@@ -1222,18 +1186,26 @@
 
             if (!this.field_70170_p.field_72995_K)
             {
-                int i = 0;
+                int i = net.minecraftforge.common.ForgeHooks.getLootingLevel(this, entity, p_70645_1_);
 
-                if (entity instanceof EntityPlayer)
-                {
-                    i = EnchantmentHelper.func_185283_h((EntityLivingBase)entity);
-                }
+                captureDrops = true;
+                capturedDrops.clear();
 
                 if (this.func_146066_aG() && this.field_70170_p.func_82736_K().func_82766_b("doMobLoot"))
                 {
                     boolean flag = this.field_70718_bc > 0;
                     this.func_184610_a(flag, i, p_70645_1_);
                 }
+
+                captureDrops = false;
+
+                if (!net.minecraftforge.common.ForgeHooks.onLivingDrops(this, p_70645_1_, capturedDrops, i, field_70718_bc > 0))
+                {
+                    for (EntityItem item : capturedDrops)
+                    {
+                        field_70170_p.func_72838_d(item);
+                    }
+                }
             }
 
             this.field_70170_p.func_72960_a(this, (byte)3);
@@ -1252,23 +1224,26 @@
 
     public void func_70653_a(Entity p_70653_1_, float p_70653_2_, double p_70653_3_, double p_70653_5_)
     {
-        if (!(this.field_70146_Z.nextDouble() < this.func_110148_a(SharedMonsterAttributes.field_111266_c).func_111126_e()))
+        net.minecraftforge.event.entity.living.LivingKnockBackEvent event = net.minecraftforge.common.ForgeHooks.onLivingKnockBack(this, p_70653_1_, p_70653_2_, p_70653_3_, p_70653_5_);
+        if(event.isCanceled()) return;
+        p_70653_2_ = event.getStrength(); p_70653_3_ = event.getRatioX(); p_70653_5_ = event.getRatioZ();
+        if (this.field_70146_Z.nextDouble() >= this.func_110148_a(SharedMonsterAttributes.field_111266_c).func_111126_e())
         {
             this.field_70160_al = true;
             float f = MathHelper.func_76133_a(p_70653_3_ * p_70653_3_ + p_70653_5_ * p_70653_5_);
-            this.field_70159_w /= 2.0;
-            this.field_70179_y /= 2.0;
+            this.field_70159_w /= 2.0D;
+            this.field_70179_y /= 2.0D;
             this.field_70159_w -= p_70653_3_ / (double)f * (double)p_70653_2_;
             this.field_70179_y -= p_70653_5_ / (double)f * (double)p_70653_2_;
 
             if (this.field_70122_E)
             {
-                this.field_70181_x /= 2.0;
+                this.field_70181_x /= 2.0D;
                 this.field_70181_x += (double)p_70653_2_;
 
-                if (this.field_70181_x > 0.4F)
+                if (this.field_70181_x > 0.4000000059604645D)
                 {
-                    this.field_70181_x = 0.4F;
+                    this.field_70181_x = 0.4000000059604645D;
                 }
             }
         }
@@ -1310,26 +1285,17 @@
             BlockPos blockpos = new BlockPos(i, j, k);
             IBlockState iblockstate = this.field_70170_p.func_180495_p(blockpos);
             Block block = iblockstate.func_177230_c();
-
-            if (block != Blocks.field_150468_ap && block != Blocks.field_150395_bd)
-            {
-                return block instanceof BlockTrapDoor && this.func_184604_a(blockpos, iblockstate);
-            }
-            else
-            {
-                return true;
-            }
+            return net.minecraftforge.common.ForgeHooks.isLivingOnLadder(iblockstate, field_70170_p, new BlockPos(i, j, k), this);
         }
     }
 
     private boolean func_184604_a(BlockPos p_184604_1_, IBlockState p_184604_2_)
     {
-        if (p_184604_2_.func_177229_b(BlockTrapDoor.field_176283_b))
+        if (((Boolean)p_184604_2_.func_177229_b(BlockTrapDoor.field_176283_b)).booleanValue())
         {
             IBlockState iblockstate = this.field_70170_p.func_180495_p(p_184604_1_.func_177977_b());
 
-            if (iblockstate.func_177230_c() == Blocks.field_150468_ap
-                    && iblockstate.func_177229_b(BlockLadder.field_176382_a) == p_184604_2_.func_177229_b(BlockTrapDoor.field_176284_a))
+            if (iblockstate.func_177230_c() == Blocks.field_150468_ap && iblockstate.func_177229_b(BlockLadder.field_176382_a) == p_184604_2_.func_177229_b(BlockTrapDoor.field_176284_a))
             {
                 return true;
             }
@@ -1338,15 +1304,16 @@
         return false;
     }
 
-    @Override
     public boolean func_70089_S()
     {
         return !this.field_70128_L && this.func_110143_aJ() > 0.0F;
     }
 
-    @Override
     public void func_180430_e(float p_180430_1_, float p_180430_2_)
     {
+        float[] ret = net.minecraftforge.common.ForgeHooks.onLivingFall(this, p_180430_1_, p_180430_2_);
+        if (ret == null) return;
+        p_180430_1_ = ret[0]; p_180430_2_ = ret[1];
         super.func_180430_e(p_180430_1_, p_180430_2_);
         PotionEffect potioneffect = this.func_70660_b(MobEffects.field_76430_j);
         float f = potioneffect == null ? 0.0F : (float)(potioneffect.func_76458_c() + 1);
@@ -1357,20 +1324,19 @@
             this.func_184185_a(this.func_184588_d(i), 1.0F, 1.0F);
             this.func_70097_a(DamageSource.field_76379_h, (float)i);
             int j = MathHelper.func_76128_c(this.field_70165_t);
-            int k = MathHelper.func_76128_c(this.field_70163_u - 0.2F);
+            int k = MathHelper.func_76128_c(this.field_70163_u - 0.20000000298023224D);
             int l = MathHelper.func_76128_c(this.field_70161_v);
             IBlockState iblockstate = this.field_70170_p.func_180495_p(new BlockPos(j, k, l));
 
             if (iblockstate.func_185904_a() != Material.field_151579_a)
             {
-                SoundType soundtype = iblockstate.func_177230_c().func_185467_w();
+                SoundType soundtype = iblockstate.func_177230_c().getSoundType(iblockstate, field_70170_p, new BlockPos(j, k, l), this);
                 this.func_184185_a(soundtype.func_185842_g(), soundtype.func_185843_a() * 0.5F, soundtype.func_185847_b() * 0.75F);
             }
         }
     }
 
     @SideOnly(Side.CLIENT)
-    @Override
     public void func_70057_ab()
     {
         this.field_70738_aO = 10;
@@ -1397,9 +1363,7 @@
         if (!p_70655_1_.func_76363_c())
         {
             this.func_70675_k(p_70655_2_);
-            p_70655_2_ = CombatRules.func_189427_a(
-                             p_70655_2_, (float)this.func_70658_aO(), (float)this.func_110148_a(SharedMonsterAttributes.field_189429_h).func_111126_e()
-                         );
+            p_70655_2_ = CombatRules.func_189427_a(p_70655_2_, (float)this.func_70658_aO(), (float)this.func_110148_a(SharedMonsterAttributes.field_189429_h).func_111126_e());
         }
 
         return p_70655_2_;
@@ -1443,17 +1407,21 @@
     {
         if (!this.func_180431_b(p_70665_1_))
         {
+            p_70665_2_ = net.minecraftforge.common.ForgeHooks.onLivingHurt(this, p_70665_1_, p_70665_2_);
+            if (p_70665_2_ <= 0) return;
             p_70665_2_ = this.func_70655_b(p_70665_1_, p_70665_2_);
             p_70665_2_ = this.func_70672_c(p_70665_1_, p_70665_2_);
-            float f1 = Math.max(p_70665_2_ - this.func_110139_bj(), 0.0F);
-            this.func_110149_m(this.func_110139_bj() - (p_70665_2_ - f1));
+            float f = p_70665_2_;
+            p_70665_2_ = Math.max(p_70665_2_ - this.func_110139_bj(), 0.0F);
+            this.func_110149_m(this.func_110139_bj() - (f - p_70665_2_));
+            p_70665_2_ = net.minecraftforge.common.ForgeHooks.onLivingDamage(this, p_70665_1_, p_70665_2_);
 
-            if (f1 != 0.0F)
+            if (p_70665_2_ != 0.0F)
             {
-                float f = this.func_110143_aJ();
-                this.func_70606_j(f - f1);
-                this.func_110142_aN().func_94547_a(p_70665_1_, f, f1);
-                this.func_110149_m(this.func_110139_bj() - f1);
+                float f1 = this.func_110143_aJ();
+                this.func_110142_aN().func_94547_a(p_70665_1_, f1, p_70665_2_);
+                this.func_70606_j(f1 - p_70665_2_); // Forge: moved to fix MC-121048
+                this.func_110149_m(this.func_110139_bj() - p_70665_2_);
             }
         }
     }
@@ -1487,12 +1455,12 @@
 
     public final int func_85035_bI()
     {
-        return this.field_70180_af.func_187225_a(field_184635_h);
+        return ((Integer)this.field_70180_af.func_187225_a(field_184635_h)).intValue();
     }
 
     public final void func_85034_r(int p_85034_1_)
     {
-        this.field_70180_af.func_187227_b(field_184635_h, p_85034_1_);
+        this.field_70180_af.func_187227_b(field_184635_h, Integer.valueOf(p_85034_1_));
     }
 
     private int func_82166_i()
@@ -1509,6 +1477,11 @@
 
     public void func_184609_a(EnumHand p_184609_1_)
     {
+        ItemStack stack = this.func_184586_b(p_184609_1_);
+        if (!stack.func_190926_b())
+        {
+            if (stack.func_77973_b().onEntitySwing(this, stack)) return;
+        }
         if (!this.field_82175_bq || this.field_110158_av >= this.func_82166_i() / 2 || this.field_110158_av < 0)
         {
             this.field_110158_av = -1;
@@ -1523,14 +1496,40 @@
     }
 
     @SideOnly(Side.CLIENT)
-    @Override
     public void func_70103_a(byte p_70103_1_)
     {
         boolean flag = p_70103_1_ == 33;
         boolean flag1 = p_70103_1_ == 36;
         boolean flag2 = p_70103_1_ == 37;
 
-        if (p_70103_1_ == 2 || flag || flag1 || flag2)
+        if (p_70103_1_ != 2 && !flag && !flag1 && !flag2)
+        {
+            if (p_70103_1_ == 3)
+            {
+                SoundEvent soundevent1 = this.func_184615_bR();
+
+                if (soundevent1 != null)
+                {
+                    this.func_184185_a(soundevent1, this.func_70599_aP(), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F);
+                }
+
+                this.func_70606_j(0.0F);
+                this.func_70645_a(DamageSource.field_76377_j);
+            }
+            else if (p_70103_1_ == 30)
+            {
+                this.func_184185_a(SoundEvents.field_187769_eM, 0.8F, 0.8F + this.field_70170_p.field_73012_v.nextFloat() * 0.4F);
+            }
+            else if (p_70103_1_ == 29)
+            {
+                this.func_184185_a(SoundEvents.field_187767_eL, 1.0F, 0.8F + this.field_70170_p.field_73012_v.nextFloat() * 0.4F);
+            }
+            else
+            {
+                super.func_70103_a(p_70103_1_);
+            }
+        }
+        else
         {
             this.field_70721_aZ = 1.5F;
             this.field_70172_ad = this.field_70771_an;
@@ -1540,9 +1539,7 @@
 
             if (flag)
             {
-                this.func_184185_a(
-                    SoundEvents.field_187903_gc, this.func_70599_aP(), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F
-                );
+                this.func_184185_a(SoundEvents.field_187903_gc, this.func_70599_aP(), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F);
             }
 
             DamageSource damagesource;
@@ -1560,42 +1557,17 @@
                 damagesource = DamageSource.field_76377_j;
             }
 
-            SoundEvent soundevent1 = this.func_184601_bQ(damagesource);
-
-            if (soundevent1 != null)
-            {
-                this.func_184185_a(soundevent1, this.func_70599_aP(), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F);
-            }
-
-            this.func_70097_a(DamageSource.field_76377_j, 0.0F);
-        }
-        else if (p_70103_1_ == 3)
-        {
-            SoundEvent soundevent = this.func_184615_bR();
+            SoundEvent soundevent = this.func_184601_bQ(damagesource);
 
             if (soundevent != null)
             {
                 this.func_184185_a(soundevent, this.func_70599_aP(), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F);
             }
 
-            this.func_70606_j(0.0F);
-            this.func_70645_a(DamageSource.field_76377_j);
-        }
-        else if (p_70103_1_ == 30)
-        {
-            this.func_184185_a(SoundEvents.field_187769_eM, 0.8F, 0.8F + this.field_70170_p.field_73012_v.nextFloat() * 0.4F);
-        }
-        else if (p_70103_1_ == 29)
-        {
-            this.func_184185_a(SoundEvents.field_187767_eL, 1.0F, 0.8F + this.field_70170_p.field_73012_v.nextFloat() * 0.4F);
-        }
-        else
-        {
-            super.func_70103_a(p_70103_1_);
+            this.func_70097_a(DamageSource.field_76377_j, 0.0F);
         }
     }
 
-    @Override
     protected void func_70076_C()
     {
         this.func_70097_a(DamageSource.field_76380_i, 4.0F);
@@ -1691,15 +1663,12 @@
         return !this.func_184582_a(p_190630_1_).func_190926_b();
     }
 
-    @Override
     public abstract Iterable<ItemStack> func_184193_aE();
 
     public abstract ItemStack func_184582_a(EntityEquipmentSlot p_184582_1_);
 
-    @Override
     public abstract void func_184201_a(EntityEquipmentSlot p_184201_1_, ItemStack p_184201_2_);
 
-    @Override
     public void func_70031_b(boolean p_70031_1_)
     {
         super.func_70031_b(p_70031_1_);
@@ -1723,9 +1692,7 @@
 
     protected float func_70647_i()
     {
-        return this.func_70631_g_()
-               ? (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.5F
-               : (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F;
+        return this.func_70631_g_() ? (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.5F : (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F;
     }
 
     protected boolean func_70610_aX()
@@ -1746,18 +1713,11 @@
             {
                 EnumFacing enumfacing = enumfacing1.func_176746_e();
                 int[][] aint1 = new int[][] {{0, 1}, {0, -1}, { -1, 1}, { -1, -1}, {1, 1}, {1, -1}, { -1, 0}, {1, 0}, {0, 1}};
-                double d5 = Math.floor(this.field_70165_t) + 0.5;
-                double d6 = Math.floor(this.field_70161_v) + 0.5;
+                double d5 = Math.floor(this.field_70165_t) + 0.5D;
+                double d6 = Math.floor(this.field_70161_v) + 0.5D;
                 double d7 = this.func_174813_aQ().field_72336_d - this.func_174813_aQ().field_72340_a;
                 double d8 = this.func_174813_aQ().field_72334_f - this.func_174813_aQ().field_72339_c;
-                AxisAlignedBB axisalignedbb = new AxisAlignedBB(
-                    d5 - d7 / 2.0,
-                    p_110145_1_.func_174813_aQ().field_72338_b,
-                    d6 - d8 / 2.0,
-                    d5 + d7 / 2.0,
-                    Math.floor(p_110145_1_.func_174813_aQ().field_72338_b) + (double)this.field_70131_O,
-                    d6 + d8 / 2.0
-                );
+                AxisAlignedBB axisalignedbb = new AxisAlignedBB(d5 - d7 / 2.0D, p_110145_1_.func_174813_aQ().field_72338_b, d6 - d8 / 2.0D, d5 + d7 / 2.0D, Math.floor(p_110145_1_.func_174813_aQ().field_72338_b) + (double)this.field_70131_O, d6 + d8 / 2.0D);
 
                 for (int[] aint : aint1)
                 {
@@ -1765,31 +1725,29 @@
                     double d10 = (double)(enumfacing1.func_82599_e() * aint[0] + enumfacing.func_82599_e() * aint[1]);
                     double d11 = d5 + d9;
                     double d12 = d6 + d10;
-                    AxisAlignedBB axisalignedbb1 = axisalignedbb.func_72317_d(d9, 0.0, d10);
+                    AxisAlignedBB axisalignedbb1 = axisalignedbb.func_72317_d(d9, 0.0D, d10);
 
                     if (!this.field_70170_p.func_184143_b(axisalignedbb1))
                     {
-                        if (this.field_70170_p.func_180495_p(new BlockPos(d11, this.field_70163_u, d12)).func_185896_q())
+                        if (this.field_70170_p.func_180495_p(new BlockPos(d11, this.field_70163_u, d12)).isSideSolid(field_70170_p, new BlockPos(d11, this.field_70163_u, d12), EnumFacing.UP))
                         {
-                            this.func_70634_a(d11, this.field_70163_u + 1.0, d12);
+                            this.func_70634_a(d11, this.field_70163_u + 1.0D, d12);
                             return;
                         }
 
-                        BlockPos blockpos = new BlockPos(d11, this.field_70163_u - 1.0, d12);
+                        BlockPos blockpos = new BlockPos(d11, this.field_70163_u - 1.0D, d12);
 
-                        if (this.field_70170_p.func_180495_p(blockpos).func_185896_q()
-                                || this.field_70170_p.func_180495_p(blockpos).func_185904_a() == Material.field_151586_h)
+                        if (this.field_70170_p.func_180495_p(blockpos).isSideSolid(field_70170_p, blockpos, EnumFacing.UP) || this.field_70170_p.func_180495_p(blockpos).func_185904_a() == Material.field_151586_h)
                         {
                             d1 = d11;
-                            d13 = this.field_70163_u + 1.0;
+                            d13 = this.field_70163_u + 1.0D;
                             d14 = d12;
                         }
                     }
-                    else if (!this.field_70170_p.func_184143_b(axisalignedbb1.func_72317_d(0.0, 1.0, 0.0))
-                             && this.field_70170_p.func_180495_p(new BlockPos(d11, this.field_70163_u + 1.0, d12)).func_185896_q())
+                    else if (!this.field_70170_p.func_184143_b(axisalignedbb1.func_72317_d(0.0D, 1.0D, 0.0D)) && this.field_70170_p.func_180495_p(new BlockPos(d11, this.field_70163_u + 1.0D, d12)).isSideSolid(field_70170_p, new BlockPos(d11, this.field_70163_u + 1.0D, d12), EnumFacing.UP))
                     {
                         d1 = d11;
-                        d13 = this.field_70163_u + 2.0;
+                        d13 = this.field_70163_u + 2.0D;
                         d14 = d12;
                     }
                 }
@@ -1799,7 +1757,7 @@
         }
         else
         {
-            double d0 = (double)(this.field_70130_N / 2.0F + p_110145_1_.field_70130_N / 2.0F) + 0.4;
+            double d0 = (double)(this.field_70130_N / 2.0F + p_110145_1_.field_70130_N / 2.0F) + 0.4D;
             float f;
 
             if (p_110145_1_ instanceof EntityBoat)
@@ -1808,30 +1766,29 @@
             }
             else
             {
-                f = (float)(Math.PI / 2) * (float)(this.func_184591_cq() == EnumHandSide.RIGHT ? -1 : 1);
+                f = ((float)Math.PI / 2F) * (float)(this.func_184591_cq() == EnumHandSide.RIGHT ? -1 : 1);
             }
 
-            float f1 = -MathHelper.func_76126_a(-this.field_70177_z * (float)(Math.PI / 180.0) - (float) Math.PI + f);
-            float f2 = -MathHelper.func_76134_b(-this.field_70177_z * (float)(Math.PI / 180.0) - (float) Math.PI + f);
+            float f1 = -MathHelper.func_76126_a(-this.field_70177_z * 0.017453292F - (float)Math.PI + f);
+            float f2 = -MathHelper.func_76134_b(-this.field_70177_z * 0.017453292F - (float)Math.PI + f);
             double d2 = Math.abs(f1) > Math.abs(f2) ? d0 / (double)Math.abs(f1) : d0 / (double)Math.abs(f2);
             double d3 = this.field_70165_t + (double)f1 * d2;
             double d4 = this.field_70161_v + (double)f2 * d2;
-            this.func_70107_b(d3, p_110145_1_.field_70163_u + (double)p_110145_1_.field_70131_O + 0.001, d4);
+            this.func_70107_b(d3, p_110145_1_.field_70163_u + (double)p_110145_1_.field_70131_O + 0.001D, d4);
 
             if (this.field_70170_p.func_184143_b(this.func_174813_aQ()))
             {
-                this.func_70107_b(d3, p_110145_1_.field_70163_u + (double)p_110145_1_.field_70131_O + 1.001, d4);
+                this.func_70107_b(d3, p_110145_1_.field_70163_u + (double)p_110145_1_.field_70131_O + 1.001D, d4);
 
                 if (this.field_70170_p.func_184143_b(this.func_174813_aQ()))
                 {
-                    this.func_70107_b(p_110145_1_.field_70165_t, p_110145_1_.field_70163_u + (double)this.field_70131_O + 0.001, p_110145_1_.field_70161_v);
+                    this.func_70107_b(p_110145_1_.field_70165_t, p_110145_1_.field_70163_u + (double)this.field_70131_O + 0.001D, p_110145_1_.field_70161_v);
                 }
             }
         }
     }
 
     @SideOnly(Side.CLIENT)
-    @Override
     public boolean func_94059_bO()
     {
         return this.func_174833_aM();
@@ -1853,22 +1810,23 @@
 
         if (this.func_70051_ag())
         {
-            float f = this.field_70177_z * (float)(Math.PI / 180.0);
+            float f = this.field_70177_z * 0.017453292F;
             this.field_70159_w -= (double)(MathHelper.func_76126_a(f) * 0.2F);
             this.field_70179_y += (double)(MathHelper.func_76134_b(f) * 0.2F);
         }
 
         this.field_70160_al = true;
+        net.minecraftforge.common.ForgeHooks.onLivingJump(this);
     }
 
     protected void func_70629_bd()
     {
-        this.field_70181_x += 0.04F;
+        this.field_70181_x += 0.03999999910593033D * this.func_110148_a(SWIM_SPEED).func_111126_e();
     }
 
     protected void func_180466_bG()
     {
-        this.field_70181_x += 0.04F;
+        this.field_70181_x += 0.03999999910593033D * this.func_110148_a(SWIM_SPEED).func_111126_e();
     }
 
     protected float func_189749_co()
@@ -1886,23 +1844,23 @@
                 {
                     if (this.func_184613_cA())
                     {
-                        if (this.field_70181_x > -0.5)
+                        if (this.field_70181_x > -0.5D)
                         {
                             this.field_70143_R = 1.0F;
                         }
 
                         Vec3d vec3d = this.func_70040_Z();
-                        float f = this.field_70125_A * (float)(Math.PI / 180.0);
+                        float f = this.field_70125_A * 0.017453292F;
                         double d6 = Math.sqrt(vec3d.field_72450_a * vec3d.field_72450_a + vec3d.field_72449_c * vec3d.field_72449_c);
                         double d8 = Math.sqrt(this.field_70159_w * this.field_70159_w + this.field_70179_y * this.field_70179_y);
                         double d1 = vec3d.func_72433_c();
                         float f4 = MathHelper.func_76134_b(f);
-                        f4 = (float)((double)f4 * (double)f4 * Math.min(1.0, d1 / 0.4));
-                        this.field_70181_x += -0.08 + (double)f4 * 0.06;
+                        f4 = (float)((double)f4 * (double)f4 * Math.min(1.0D, d1 / 0.4D));
+                        this.field_70181_x += -0.08D + (double)f4 * 0.06D;
 
-                        if (this.field_70181_x < 0.0 && d6 > 0.0)
+                        if (this.field_70181_x < 0.0D && d6 > 0.0D)
                         {
-                            double d2 = this.field_70181_x * -0.1 * (double)f4;
+                            double d2 = this.field_70181_x * -0.1D * (double)f4;
                             this.field_70181_x += d2;
                             this.field_70159_w += vec3d.field_72450_a * d2 / d6;
                             this.field_70179_y += vec3d.field_72449_c * d2 / d6;
@@ -1910,28 +1868,28 @@
 
                         if (f < 0.0F)
                         {
-                            double d10 = d8 * (double)(-MathHelper.func_76126_a(f)) * 0.04;
-                            this.field_70181_x += d10 * 3.2;
+                            double d10 = d8 * (double)(-MathHelper.func_76126_a(f)) * 0.04D;
+                            this.field_70181_x += d10 * 3.2D;
                             this.field_70159_w -= vec3d.field_72450_a * d10 / d6;
                             this.field_70179_y -= vec3d.field_72449_c * d10 / d6;
                         }
 
-                        if (d6 > 0.0)
+                        if (d6 > 0.0D)
                         {
-                            this.field_70159_w += (vec3d.field_72450_a / d6 * d8 - this.field_70159_w) * 0.1;
-                            this.field_70179_y += (vec3d.field_72449_c / d6 * d8 - this.field_70179_y) * 0.1;
+                            this.field_70159_w += (vec3d.field_72450_a / d6 * d8 - this.field_70159_w) * 0.1D;
+                            this.field_70179_y += (vec3d.field_72449_c / d6 * d8 - this.field_70179_y) * 0.1D;
                         }
 
-                        this.field_70159_w *= 0.99F;
-                        this.field_70181_x *= 0.98F;
-                        this.field_70179_y *= 0.99F;
+                        this.field_70159_w *= 0.9900000095367432D;
+                        this.field_70181_x *= 0.9800000190734863D;
+                        this.field_70179_y *= 0.9900000095367432D;
                         this.func_70091_d(MoverType.SELF, this.field_70159_w, this.field_70181_x, this.field_70179_y);
 
                         if (this.field_70123_F && !this.field_70170_p.field_72995_K)
                         {
                             double d11 = Math.sqrt(this.field_70159_w * this.field_70159_w + this.field_70179_y * this.field_70179_y);
                             double d3 = d8 - d11;
-                            float f5 = (float)(d3 * 10.0 - 3.0);
+                            float f5 = (float)(d3 * 10.0D - 3.0D);
 
                             if (f5 > 0.0F)
                             {
@@ -1948,13 +1906,12 @@
                     else
                     {
                         float f6 = 0.91F;
-                        BlockPos.PooledMutableBlockPos blockpos$pooledmutableblockpos = BlockPos.PooledMutableBlockPos.func_185345_c(
-                                    this.field_70165_t, this.func_174813_aQ().field_72338_b - 1.0, this.field_70161_v
-                                );
+                        BlockPos.PooledMutableBlockPos blockpos$pooledmutableblockpos = BlockPos.PooledMutableBlockPos.func_185345_c(this.field_70165_t, this.func_174813_aQ().field_72338_b - 1.0D, this.field_70161_v);
 
                         if (this.field_70122_E)
                         {
-                            f6 = this.field_70170_p.func_180495_p(blockpos$pooledmutableblockpos).func_177230_c().field_149765_K * 0.91F;
+                            IBlockState underState = this.field_70170_p.func_180495_p(blockpos$pooledmutableblockpos);
+                            f6 = underState.func_177230_c().getSlipperiness(underState, this.field_70170_p, blockpos$pooledmutableblockpos, this) * 0.91F;
                         }
 
                         float f7 = 0.16277136F / (f6 * f6 * f6);
@@ -1974,32 +1931,27 @@
 
                         if (this.field_70122_E)
                         {
-                            f6 = this.field_70170_p
-                                 .func_180495_p(
-                                     blockpos$pooledmutableblockpos.func_189532_c(this.field_70165_t, this.func_174813_aQ().field_72338_b - 1.0, this.field_70161_v)
-                                 )
-                                 .func_177230_c()
-                                 .field_149765_K
-                                 * 0.91F;
+                            IBlockState underState = this.field_70170_p.func_180495_p(blockpos$pooledmutableblockpos.func_189532_c(this.field_70165_t, this.func_174813_aQ().field_72338_b - 1.0D, this.field_70161_v));
+                            f6 = underState.func_177230_c().getSlipperiness(underState, this.field_70170_p, blockpos$pooledmutableblockpos, this) * 0.91F;
                         }
 
                         if (this.func_70617_f_())
                         {
                             float f9 = 0.15F;
-                            this.field_70159_w = MathHelper.func_151237_a(this.field_70159_w, -0.15F, 0.15F);
-                            this.field_70179_y = MathHelper.func_151237_a(this.field_70179_y, -0.15F, 0.15F);
+                            this.field_70159_w = MathHelper.func_151237_a(this.field_70159_w, -0.15000000596046448D, 0.15000000596046448D);
+                            this.field_70179_y = MathHelper.func_151237_a(this.field_70179_y, -0.15000000596046448D, 0.15000000596046448D);
                             this.field_70143_R = 0.0F;
 
-                            if (this.field_70181_x < -0.15)
+                            if (this.field_70181_x < -0.15D)
                             {
-                                this.field_70181_x = -0.15;
+                                this.field_70181_x = -0.15D;
                             }
 
                             boolean flag = this.func_70093_af() && this instanceof EntityPlayer;
 
-                            if (flag && this.field_70181_x < 0.0)
+                            if (flag && this.field_70181_x < 0.0D)
                             {
-                                this.field_70181_x = 0.0;
+                                this.field_70181_x = 0.0D;
                             }
                         }
 
@@ -2007,37 +1959,35 @@
 
                         if (this.field_70123_F && this.func_70617_f_())
                         {
-                            this.field_70181_x = 0.2;
+                            this.field_70181_x = 0.2D;
                         }
 
                         if (this.func_70644_a(MobEffects.field_188424_y))
                         {
-                            this.field_70181_x += (0.05 * (double)(this.func_70660_b(MobEffects.field_188424_y).func_76458_c() + 1) - this.field_70181_x) * 0.2;
+                            this.field_70181_x += (0.05D * (double)(this.func_70660_b(MobEffects.field_188424_y).func_76458_c() + 1) - this.field_70181_x) * 0.2D;
                         }
                         else
                         {
-                            blockpos$pooledmutableblockpos.func_189532_c(this.field_70165_t, 0.0, this.field_70161_v);
+                            blockpos$pooledmutableblockpos.func_189532_c(this.field_70165_t, 0.0D, this.field_70161_v);
 
-                            if (!this.field_70170_p.field_72995_K
-                                    || this.field_70170_p.func_175667_e(blockpos$pooledmutableblockpos)
-                                    && this.field_70170_p.func_175726_f(blockpos$pooledmutableblockpos).func_177410_o())
+                            if (!this.field_70170_p.field_72995_K || this.field_70170_p.func_175667_e(blockpos$pooledmutableblockpos) && this.field_70170_p.func_175726_f(blockpos$pooledmutableblockpos).func_177410_o())
                             {
                                 if (!this.func_189652_ae())
                                 {
-                                    this.field_70181_x -= 0.08;
+                                    this.field_70181_x -= 0.08D;
                                 }
                             }
-                            else if (this.field_70163_u > 0.0)
+                            else if (this.field_70163_u > 0.0D)
                             {
-                                this.field_70181_x = -0.1;
+                                this.field_70181_x = -0.1D;
                             }
                             else
                             {
-                                this.field_70181_x = 0.0;
+                                this.field_70181_x = 0.0D;
                             }
                         }
 
-                        this.field_70181_x *= 0.98F;
+                        this.field_70181_x *= 0.9800000190734863D;
                         this.field_70159_w *= (double)f6;
                         this.field_70179_y *= (double)f6;
                         blockpos$pooledmutableblockpos.func_185344_t();
@@ -2048,18 +1998,18 @@
                     double d4 = this.field_70163_u;
                     this.func_191958_b(p_191986_1_, p_191986_2_, p_191986_3_, 0.02F);
                     this.func_70091_d(MoverType.SELF, this.field_70159_w, this.field_70181_x, this.field_70179_y);
-                    this.field_70159_w *= 0.5;
-                    this.field_70181_x *= 0.5;
-                    this.field_70179_y *= 0.5;
+                    this.field_70159_w *= 0.5D;
+                    this.field_70181_x *= 0.5D;
+                    this.field_70179_y *= 0.5D;
 
                     if (!this.func_189652_ae())
                     {
-                        this.field_70181_x -= 0.02;
+                        this.field_70181_x -= 0.02D;
                     }
 
-                    if (this.field_70123_F && this.func_70038_c(this.field_70159_w, this.field_70181_x + 0.6F - this.field_70163_u + d4, this.field_70179_y))
+                    if (this.field_70123_F && this.func_70038_c(this.field_70159_w, this.field_70181_x + 0.6000000238418579D - this.field_70163_u + d4, this.field_70179_y))
                     {
-                        this.field_70181_x = 0.3F;
+                        this.field_70181_x = 0.30000001192092896D;
                     }
                 }
             }
@@ -2089,17 +2039,17 @@
                 this.func_191958_b(p_191986_1_, p_191986_2_, p_191986_3_, f2);
                 this.func_70091_d(MoverType.SELF, this.field_70159_w, this.field_70181_x, this.field_70179_y);
                 this.field_70159_w *= (double)f1;
-                this.field_70181_x *= 0.8F;
+                this.field_70181_x *= 0.800000011920929D;
                 this.field_70179_y *= (double)f1;
 
                 if (!this.func_189652_ae())
                 {
-                    this.field_70181_x -= 0.02;
+                    this.field_70181_x -= 0.02D;
                 }
 
-                if (this.field_70123_F && this.func_70038_c(this.field_70159_w, this.field_70181_x + 0.6F - this.field_70163_u + d0, this.field_70179_y))
+                if (this.field_70123_F && this.func_70038_c(this.field_70159_w, this.field_70181_x + 0.6000000238418579D - this.field_70163_u + d0, this.field_70179_y))
                 {
-                    this.field_70181_x = 0.3F;
+                    this.field_70181_x = 0.30000001192092896D;
                 }
             }
         }
@@ -2107,7 +2057,7 @@
         this.field_184618_aE = this.field_70721_aZ;
         double d5 = this.field_70165_t - this.field_70169_q;
         double d7 = this.field_70161_v - this.field_70166_s;
-        double d9 = this instanceof net.minecraft.entity.passive.EntityFlying ? this.field_70163_u - this.field_70167_r : 0.0;
+        double d9 = this instanceof net.minecraft.entity.passive.EntityFlying ? this.field_70163_u - this.field_70167_r : 0.0D;
         float f10 = MathHelper.func_76133_a(d5 * d5 + d9 * d9 + d7 * d7) * 4.0F;
 
         if (f10 > 1.0F)
@@ -2140,9 +2090,9 @@
         return false;
     }
 
-    @Override
     public void func_70071_h_()
     {
+        if (net.minecraftforge.common.ForgeHooks.onLivingUpdate(this)) return;
         super.func_70071_h_();
         this.func_184608_ct();
 
@@ -2185,9 +2135,9 @@
 
                 if (!ItemStack.func_77989_b(itemstack1, itemstack))
                 {
-                    ((WorldServer)this.field_70170_p)
-                    .func_73039_n()
-                    .func_151247_a(this, new SPacketEntityEquipment(this.func_145782_y(), entityequipmentslot, itemstack1));
+                    if (!ItemStack.areItemStacksEqualUsingNBTShareTag(itemstack1, itemstack))
+                    ((WorldServer)this.field_70170_p).func_73039_n().func_151247_a(this, new SPacketEntityEquipment(this.func_145782_y(), entityequipmentslot, itemstack1));
+                    net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.living.LivingEquipmentChangeEvent(this, entityequipmentslot, itemstack, itemstack1));
 
                     if (!itemstack.func_190926_b())
                     {
@@ -2202,12 +2152,10 @@
                     switch (entityequipmentslot.func_188453_a())
                     {
                         case HAND:
-                            this.field_184630_bs
-                            .set(entityequipmentslot.func_188454_b(), itemstack1.func_190926_b() ? ItemStack.field_190927_a : itemstack1.func_77946_l());
+                            this.field_184630_bs.set(entityequipmentslot.func_188454_b(), itemstack1.func_190926_b() ? ItemStack.field_190927_a : itemstack1.func_77946_l());
                             break;
                         case ARMOR:
-                            this.field_184631_bt
-                            .set(entityequipmentslot.func_188454_b(), itemstack1.func_190926_b() ? ItemStack.field_190927_a : itemstack1.func_77946_l());
+                            this.field_184631_bt.set(entityequipmentslot.func_188454_b(), itemstack1.func_190926_b() ? ItemStack.field_190927_a : itemstack1.func_77946_l());
                     }
                 }
             }
@@ -2241,7 +2189,7 @@
         {
             f = 1.0F;
             f5 = (float)Math.sqrt((double)f3) * 3.0F;
-            float f1 = (float)MathHelper.func_181159_b(d1, d0) * (180.0F / (float)Math.PI) - 90.0F;
+            float f1 = (float)MathHelper.func_181159_b(d1, d0) * (180F / (float)Math.PI) - 90.0F;
             float f2 = MathHelper.func_76135_e(MathHelper.func_76142_g(this.field_70177_z) - f1);
 
             if (95.0F < f2 && f2 < 265.0F)
@@ -2376,24 +2324,24 @@
         }
         else if (!this.func_70613_aW())
         {
-            this.field_70159_w *= 0.98;
-            this.field_70181_x *= 0.98;
-            this.field_70179_y *= 0.98;
-        }
-
-        if (Math.abs(this.field_70159_w) < 0.003)
-        {
-            this.field_70159_w = 0.0;
-        }
-
-        if (Math.abs(this.field_70181_x) < 0.003)
-        {
-            this.field_70181_x = 0.0;
-        }
-
-        if (Math.abs(this.field_70179_y) < 0.003)
-        {
-            this.field_70179_y = 0.0;
+            this.field_70159_w *= 0.98D;
+            this.field_70181_x *= 0.98D;
+            this.field_70179_y *= 0.98D;
+        }
+
+        if (Math.abs(this.field_70159_w) < 0.003D)
+        {
+            this.field_70159_w = 0.0D;
+        }
+
+        if (Math.abs(this.field_70181_x) < 0.003D)
+        {
+            this.field_70181_x = 0.0D;
+        }
+
+        if (Math.abs(this.field_70179_y) < 0.003D)
+        {
+            this.field_70179_y = 0.0D;
         }
 
         this.field_70170_p.field_72984_F.func_76320_a("ai");
@@ -2500,7 +2448,7 @@
 
                 for (int k = 0; k < list.size(); ++k)
                 {
-                    if (!list.get(k).func_184218_aH())
+                    if (!((Entity)list.get(k)).func_184218_aH())
                     {
                         ++j;
                     }
@@ -2525,7 +2473,6 @@
         p_82167_1_.func_70108_f(this);
     }
 
-    @Override
     public void func_184210_p()
     {
         Entity entity = this.func_184187_bx();
@@ -2537,7 +2484,6 @@
         }
     }
 
-    @Override
     public void func_70098_U()
     {
         super.func_70098_U();
@@ -2547,10 +2493,7 @@
     }
 
     @SideOnly(Side.CLIENT)
-    @Override
-    public void func_180426_a(
-        double p_180426_1_, double p_180426_3_, double p_180426_5_, float p_180426_7_, float p_180426_8_, int p_180426_9_, boolean p_180426_10_
-    )
+    public void func_180426_a(double p_180426_1_, double p_180426_3_, double p_180426_5_, float p_180426_7_, float p_180426_8_, int p_180426_9_, boolean p_180426_10_)
     {
         this.field_184623_bh = p_180426_1_;
         this.field_184624_bi = p_180426_3_;
@@ -2580,18 +2523,9 @@
 
     public boolean func_70685_l(Entity p_70685_1_)
     {
-        return this.field_70170_p
-               .func_147447_a(
-                   new Vec3d(this.field_70165_t, this.field_70163_u + (double)this.func_70047_e(), this.field_70161_v),
-                   new Vec3d(p_70685_1_.field_70165_t, p_70685_1_.field_70163_u + (double)p_70685_1_.func_70047_e(), p_70685_1_.field_70161_v),
-                   false,
-                   true,
-                   false
-               )
-               == null;
+        return this.field_70170_p.func_147447_a(new Vec3d(this.field_70165_t, this.field_70163_u + (double)this.func_70047_e(), this.field_70161_v), new Vec3d(p_70685_1_.field_70165_t, p_70685_1_.field_70163_u + (double)p_70685_1_.func_70047_e(), p_70685_1_.field_70161_v), false, true, false) == null;
     }
 
-    @Override
     public Vec3d func_70676_i(float p_70676_1_)
     {
         if (p_70676_1_ == 1.0F)
@@ -2624,37 +2558,31 @@
         return !this.field_70170_p.field_72995_K;
     }
 
-    @Override
     public boolean func_70067_L()
     {
         return !this.field_70128_L;
     }
 
-    @Override
     public boolean func_70104_M()
     {
         return this.func_70089_S() && !this.func_70617_f_();
     }
 
-    @Override
     protected void func_70018_K()
     {
         this.field_70133_I = this.field_70146_Z.nextDouble() >= this.func_110148_a(SharedMonsterAttributes.field_111266_c).func_111126_e();
     }
 
-    @Override
     public float func_70079_am()
     {
         return this.field_70759_as;
     }
 
-    @Override
     public void func_70034_d(float p_70034_1_)
     {
         this.field_70759_as = p_70034_1_;
     }
 
-    @Override
     public void func_181013_g(float p_181013_1_)
     {
         this.field_70761_aq = p_181013_1_;
@@ -2688,16 +2616,50 @@
         this.field_70752_e = true;
     }
 
+    /***
+     * Removes all potion effects that have curativeItem as a curative item for its effect
+     * @param curativeItem The itemstack we are using to cure potion effects
+     */
+    public void curePotionEffects(ItemStack curativeItem)
+    {
+        if (field_70170_p.field_72995_K) return;
+        Iterator<PotionEffect> iterator = this.field_70713_bf.values().iterator();
+
+        while (iterator.hasNext())
+        {
+            PotionEffect effect = iterator.next();
+
+            if (effect.isCurativeItem(curativeItem) && !net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(new net.minecraftforge.event.entity.living.PotionEvent.PotionRemoveEvent(this, effect)))
+            {
+                func_70688_c(effect);
+                iterator.remove();
+                this.field_70752_e = true;
+            }
+        }
+    }
+
+    /**
+     * Returns true if the entity's rider (EntityPlayer) should face forward when mounted.
+     * currently only used in vanilla code by pigs.
+     *
+     * @param player The player who is riding the entity.
+     * @return If the player should orient the same direction as this entity.
+     */
+    public boolean shouldRiderFaceForward(EntityPlayer player)
+    {
+        return this instanceof net.minecraft.entity.passive.EntityPig;
+    }
+
     public abstract EnumHandSide func_184591_cq();
 
     public boolean func_184587_cr()
     {
-        return (this.field_70180_af.func_187225_a(field_184621_as) & 1) > 0;
+        return (((Byte)this.field_70180_af.func_187225_a(field_184621_as)).byteValue() & 1) > 0;
     }
 
     public EnumHand func_184600_cs()
     {
-        return (this.field_70180_af.func_187225_a(field_184621_as) & 2) > 0 ? EnumHand.OFF_HAND : EnumHand.MAIN_HAND;
+        return (((Byte)this.field_70180_af.func_187225_a(field_184621_as)).byteValue() & 2) > 0 ? EnumHand.OFF_HAND : EnumHand.MAIN_HAND;
     }
 
     protected void func_184608_ct()
@@ -2705,15 +2667,23 @@
         if (this.func_184587_cr())
         {
             ItemStack itemstack = this.func_184586_b(this.func_184600_cs());
+            if (net.minecraftforge.common.ForgeHooks.canContinueUsing(this.field_184627_bm, itemstack)) this.field_184627_bm = itemstack;
 
             if (itemstack == this.field_184627_bm)
             {
+                if (!this.field_184627_bm.func_190926_b())
+                {
+                    field_184628_bn = net.minecraftforge.event.ForgeEventFactory.onItemUseTick(this, field_184627_bm, field_184628_bn);
+                    if (field_184628_bn > 0)
+                        field_184627_bm.func_77973_b().onUsingTick(field_184627_bm, this, field_184628_bn);
+                }
+
                 if (this.func_184605_cv() <= 25 && this.func_184605_cv() % 4 == 0)
                 {
                     this.func_184584_a(this.field_184627_bm, 5);
                 }
 
-                if (--this.field_184628_bn == 0 && !this.field_70170_p.field_72995_K)
+                if (--this.field_184628_bn <= 0 && !this.field_70170_p.field_72995_K)
                 {
                     this.func_71036_o();
                 }
@@ -2731,8 +2701,10 @@
 
         if (!itemstack.func_190926_b() && !this.func_184587_cr())
         {
+            int duration = net.minecraftforge.event.ForgeEventFactory.onItemUseStart(this, itemstack, itemstack.func_77988_m());
+            if (duration <= 0) return;
             this.field_184627_bm = itemstack;
-            this.field_184628_bn = itemstack.func_77988_m();
+            this.field_184628_bn = duration;
 
             if (!this.field_70170_p.field_72995_K)
             {
@@ -2743,12 +2715,11 @@
                     i |= 2;
                 }
 
-                this.field_70180_af.func_187227_b(field_184621_as, (byte)i);
+                this.field_70180_af.func_187227_b(field_184621_as, Byte.valueOf((byte)i));
             }
         }
     }
 
-    @Override
     public void func_184206_a(DataParameter<?> p_184206_1_)
     {
         super.func_184206_a(p_184206_1_);
@@ -2785,51 +2756,26 @@
             {
                 for (int i = 0; i < p_184584_2_; ++i)
                 {
-                    Vec3d vec3d = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5) * 0.1, Math.random() * 0.1 + 0.1, 0.0);
-                    vec3d = vec3d.func_178789_a(-this.field_70125_A * (float)(Math.PI / 180.0));
-                    vec3d = vec3d.func_178785_b(-this.field_70177_z * (float)(Math.PI / 180.0));
-                    double d0 = (double)(-this.field_70146_Z.nextFloat()) * 0.6 - 0.3;
-                    Vec3d vec3d1 = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5) * 0.3, d0, 0.6);
-                    vec3d1 = vec3d1.func_178789_a(-this.field_70125_A * (float)(Math.PI / 180.0));
-                    vec3d1 = vec3d1.func_178785_b(-this.field_70177_z * (float)(Math.PI / 180.0));
+                    Vec3d vec3d = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5D) * 0.1D, Math.random() * 0.1D + 0.1D, 0.0D);
+                    vec3d = vec3d.func_178789_a(-this.field_70125_A * 0.017453292F);
+                    vec3d = vec3d.func_178785_b(-this.field_70177_z * 0.017453292F);
+                    double d0 = (double)(-this.field_70146_Z.nextFloat()) * 0.6D - 0.3D;
+                    Vec3d vec3d1 = new Vec3d(((double)this.field_70146_Z.nextFloat() - 0.5D) * 0.3D, d0, 0.6D);
+                    vec3d1 = vec3d1.func_178789_a(-this.field_70125_A * 0.017453292F);
+                    vec3d1 = vec3d1.func_178785_b(-this.field_70177_z * 0.017453292F);
                     vec3d1 = vec3d1.func_72441_c(this.field_70165_t, this.field_70163_u + (double)this.func_70047_e(), this.field_70161_v);
 
                     if (p_184584_1_.func_77981_g())
                     {
-                        this.field_70170_p
-                        .func_175688_a(
-                            EnumParticleTypes.ITEM_CRACK,
-                            vec3d1.field_72450_a,
-                            vec3d1.field_72448_b,
-                            vec3d1.field_72449_c,
-                            vec3d.field_72450_a,
-                            vec3d.field_72448_b + 0.05,
-                            vec3d.field_72449_c,
-                            Item.func_150891_b(p_184584_1_.func_77973_b()),
-                            p_184584_1_.func_77960_j()
-                        );
+                        this.field_70170_p.func_175688_a(EnumParticleTypes.ITEM_CRACK, vec3d1.field_72450_a, vec3d1.field_72448_b, vec3d1.field_72449_c, vec3d.field_72450_a, vec3d.field_72448_b + 0.05D, vec3d.field_72449_c, Item.func_150891_b(p_184584_1_.func_77973_b()), p_184584_1_.func_77960_j());
                     }
                     else
                     {
-                        this.field_70170_p
-                        .func_175688_a(
-                            EnumParticleTypes.ITEM_CRACK,
-                            vec3d1.field_72450_a,
-                            vec3d1.field_72448_b,
-                            vec3d1.field_72449_c,
-                            vec3d.field_72450_a,
-                            vec3d.field_72448_b + 0.05,
-                            vec3d.field_72449_c,
-                            Item.func_150891_b(p_184584_1_.func_77973_b())
-                        );
+                        this.field_70170_p.func_175688_a(EnumParticleTypes.ITEM_CRACK, vec3d1.field_72450_a, vec3d1.field_72448_b, vec3d1.field_72449_c, vec3d.field_72450_a, vec3d.field_72448_b + 0.05D, vec3d.field_72449_c, Item.func_150891_b(p_184584_1_.func_77973_b()));
                     }
                 }
 
-                this.func_184185_a(
-                    SoundEvents.field_187537_bA,
-                    0.5F + 0.5F * (float)this.field_70146_Z.nextInt(2),
-                    (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F
-                );
+                this.func_184185_a(SoundEvents.field_187537_bA, 0.5F + 0.5F * (float)this.field_70146_Z.nextInt(2), (this.field_70146_Z.nextFloat() - this.field_70146_Z.nextFloat()) * 0.2F + 1.0F);
             }
         }
     }
@@ -2839,7 +2785,10 @@
         if (!this.field_184627_bm.func_190926_b() && this.func_184587_cr())
         {
             this.func_184584_a(this.field_184627_bm, 16);
-            this.func_184611_a(this.func_184600_cs(), this.field_184627_bm.func_77950_b(this.field_70170_p, this));
+            ItemStack activeItemStackCopy = this.field_184627_bm.func_77946_l();
+            ItemStack itemstack = this.field_184627_bm.func_77950_b(this.field_70170_p, this);
+            itemstack = net.minecraftforge.event.ForgeEventFactory.onItemUseFinish(this, activeItemStackCopy, func_184605_cv(), itemstack);
+            this.func_184611_a(this.func_184600_cs(), itemstack);
             this.func_184602_cy();
         }
     }
@@ -2863,7 +2812,8 @@
     {
         if (!this.field_184627_bm.func_190926_b())
         {
-            this.field_184627_bm.func_77974_b(this.field_70170_p, this, this.func_184605_cv());
+            if (!net.minecraftforge.event.ForgeEventFactory.onUseItemStop(this, field_184627_bm, this.func_184605_cv()))
+                this.field_184627_bm.func_77974_b(this.field_70170_p, this, this.func_184605_cv());
         }
 
         this.func_184602_cy();
@@ -2873,7 +2823,7 @@
     {
         if (!this.field_70170_p.field_72995_K)
         {
-            this.field_70180_af.func_187227_b(field_184621_as, (byte)0);
+            this.field_70180_af.func_187227_b(field_184621_as, Byte.valueOf((byte)0));
         }
 
         this.field_184627_bm = ItemStack.field_190927_a;
@@ -2967,13 +2917,13 @@
 
             for (int j = 0; j < 128; ++j)
             {
-                double d6 = (double)j / 127.0;
+                double d6 = (double)j / 127.0D;
                 float f = (random.nextFloat() - 0.5F) * 0.2F;
                 float f1 = (random.nextFloat() - 0.5F) * 0.2F;
                 float f2 = (random.nextFloat() - 0.5F) * 0.2F;
-                double d3 = d0 + (this.field_70165_t - d0) * d6 + (random.nextDouble() - 0.5) * (double)this.field_70130_N * 2.0;
+                double d3 = d0 + (this.field_70165_t - d0) * d6 + (random.nextDouble() - 0.5D) * (double)this.field_70130_N * 2.0D;
                 double d4 = d1 + (this.field_70163_u - d1) * d6 + random.nextDouble() * (double)this.field_70131_O;
-                double d5 = d2 + (this.field_70161_v - d2) * d6 + (random.nextDouble() - 0.5) * (double)this.field_70130_N * 2.0;
+                double d5 = d2 + (this.field_70161_v - d2) * d6 + (random.nextDouble() - 0.5D) * (double)this.field_70130_N * 2.0D;
                 world.func_175688_a(EnumParticleTypes.PORTAL, d3, d4, d5, (double)f, (double)f1, (double)f2);
             }
 
@@ -2991,6 +2941,31 @@
         return true;
     }
 
+    // FORGE
+    private final net.minecraftforge.items.IItemHandlerModifiable handHandler = new net.minecraftforge.items.wrapper.EntityHandsInvWrapper(this);
+    private final net.minecraftforge.items.IItemHandlerModifiable armorHandler = new net.minecraftforge.items.wrapper.EntityArmorInvWrapper(this);
+    private final net.minecraftforge.items.IItemHandler joinedHandler = new net.minecraftforge.items.wrapper.CombinedInvWrapper(armorHandler, handHandler);
+
+    @SuppressWarnings("unchecked")
+    @Override
+    @Nullable
+    public <T> T getCapability(net.minecraftforge.common.capabilities.Capability<T> capability, @Nullable net.minecraft.util.EnumFacing facing)
+    {
+        if (capability == net.minecraftforge.items.CapabilityItemHandler.ITEM_HANDLER_CAPABILITY)
+        {
+            if (facing == null) return (T) joinedHandler;
+            else if (facing.func_176740_k().func_176720_b()) return (T) handHandler;
+            else if (facing.func_176740_k().func_176722_c()) return (T) armorHandler;
+        }
+        return super.getCapability(capability, facing);
+    }
+
+    @Override
+    public boolean hasCapability(net.minecraftforge.common.capabilities.Capability<?> capability, @Nullable net.minecraft.util.EnumFacing facing)
+    {
+        return capability == net.minecraftforge.items.CapabilityItemHandler.ITEM_HANDLER_CAPABILITY || super.hasCapability(capability, facing);
+    }
+
     public boolean func_190631_cK()
     {
         return true;
@@ -2999,5 +2974,31 @@
     @SideOnly(Side.CLIENT)
     public void func_191987_a(BlockPos p_191987_1_, boolean p_191987_2_)
     {
+    }
+    
+    @Override
+    public void func_191958_b(float strafe, float up, float forward, float friction)
+    {
+        float f = strafe * strafe + up * up + forward * forward;
+        if (f >= 1.0E-4F)
+        {
+            f = MathHelper.func_76129_c(f);
+            if (f < 1.0F) f = 1.0F;
+            f = friction / f;
+            strafe = strafe * f;
+            up = up * f;
+            forward = forward * f;
+            if(this.func_70090_H() || this.func_180799_ab())
+            {
+                strafe = strafe * (float)this.func_110148_a(SWIM_SPEED).func_111126_e();
+                up = up * (float)this.func_110148_a(SWIM_SPEED).func_111126_e();
+                forward = forward * (float)this.func_110148_a(SWIM_SPEED).func_111126_e();
+            }
+            float f1 = MathHelper.func_76126_a(this.field_70177_z * 0.017453292F);
+            float f2 = MathHelper.func_76134_b(this.field_70177_z * 0.017453292F);
+            this.field_70159_w += (double)(strafe * f2 - forward * f1);
+            this.field_70181_x += (double)up;
+            this.field_70179_y += (double)(forward * f2 + strafe * f1);
+        }
     }
 }
