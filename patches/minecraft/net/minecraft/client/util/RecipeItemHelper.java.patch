--- before/net/minecraft/client/util/RecipeItemHelper.java
+++ after/net/minecraft/client/util/RecipeItemHelper.java
@@ -8,8 +8,10 @@
 import it.unimi.dsi.fastutil.ints.IntCollection;
 import it.unimi.dsi.fastutil.ints.IntIterator;
 import it.unimi.dsi.fastutil.ints.IntList;
+import it.unimi.dsi.fastutil.ints.IntListIterator;
 import java.util.BitSet;
 import java.util.List;
+import java.util.function.Predicate;
 import javax.annotation.Nullable;
 import net.minecraft.item.Item;
 import net.minecraft.item.ItemStack;
@@ -22,10 +24,15 @@
 
     public void func_194112_a(ItemStack p_194112_1_)
     {
+        this.accountStack(p_194112_1_, -1);
+    }
+
+    public void accountStack(ItemStack p_194112_1_, int forceCount)
+    {
         if (!p_194112_1_.func_190926_b() && !p_194112_1_.func_77951_h() && !p_194112_1_.func_77948_v() && !p_194112_1_.func_82837_s())
         {
             int i = func_194113_b(p_194112_1_);
-            int j = p_194112_1_.func_190916_E();
+            int j = forceCount == -1 ? p_194112_1_.func_190916_E() : forceCount;
             this.func_194117_b(i, j);
         }
     }
@@ -106,7 +113,10 @@
         {
             this.field_194105_b = p_i47608_2_;
             this.field_194106_c.addAll(p_i47608_2_.func_192400_c());
-            this.field_194106_c.removeIf((p_194103_0_) -> p_194103_0_ == Ingredient.field_193370_a);
+            this.field_194106_c.removeIf((p_194103_0_) ->
+            {
+                return p_194103_0_ == Ingredient.field_193370_a;
+            });
             this.field_194107_d = this.field_194106_c.size();
             this.field_194108_e = this.func_194097_a();
             this.field_194109_f = this.field_194108_e.length;