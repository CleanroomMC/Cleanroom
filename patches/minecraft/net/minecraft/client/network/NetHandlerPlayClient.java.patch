--- before/net/minecraft/client/network/NetHandlerPlayClient.java
+++ after/net/minecraft/client/network/NetHandlerPlayClient.java
@@ -14,11 +14,13 @@
 import java.nio.charset.StandardCharsets;
 import java.util.Arrays;
 import java.util.Collection;
+import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
 import java.util.Random;
 import java.util.UUID;
 import java.util.Map.Entry;
+import java.util.function.Consumer;
 import javax.annotation.Nullable;
 import net.minecraft.advancements.Advancement;
 import net.minecraft.block.Block;
@@ -48,7 +50,6 @@
 import net.minecraft.client.gui.inventory.GuiContainerCreative;
 import net.minecraft.client.gui.recipebook.GuiRecipeBook;
 import net.minecraft.client.gui.recipebook.IRecipeShownListener;
-import net.minecraft.client.gui.recipebook.RecipeList;
 import net.minecraft.client.gui.toasts.RecipeToast;
 import net.minecraft.client.multiplayer.ClientAdvancementManager;
 import net.minecraft.client.multiplayer.PlayerControllerMP;
@@ -75,6 +76,7 @@
 import net.minecraft.entity.NpcMerchant;
 import net.minecraft.entity.ai.attributes.AbstractAttributeMap;
 import net.minecraft.entity.ai.attributes.AttributeModifier;
+import net.minecraft.entity.ai.attributes.IAttribute;
 import net.minecraft.entity.ai.attributes.IAttributeInstance;
 import net.minecraft.entity.ai.attributes.RangedAttribute;
 import net.minecraft.entity.effect.EntityLightningBolt;
@@ -269,7 +271,7 @@
     private Minecraft field_147299_f;
     private WorldClient field_147300_g;
     private boolean field_147309_h;
-    private final Map<UUID, NetworkPlayerInfo> field_147310_i = Maps.newHashMap();
+    private final Map<UUID, NetworkPlayerInfo> field_147310_i = Maps.<UUID, NetworkPlayerInfo>newHashMap();
     public int field_147304_c = 20;
     private boolean field_147308_k;
     private final ClientAdvancementManager field_191983_k;
@@ -289,18 +291,11 @@
         this.field_147300_g = null;
     }
 
-    @Override
     public void func_147282_a(SPacketJoinGame p_147282_1_)
     {
         PacketThreadUtil.func_180031_a(p_147282_1_, this, this.field_147299_f);
         this.field_147299_f.field_71442_b = new PlayerControllerMP(this.field_147299_f, this);
-        this.field_147300_g = new WorldClient(
-            this,
-            new WorldSettings(0L, p_147282_1_.func_149198_e(), false, p_147282_1_.func_149195_d(), p_147282_1_.func_149196_i()),
-            p_147282_1_.func_149194_f(),
-            p_147282_1_.func_149192_g(),
-            this.field_147299_f.field_71424_I
-        );
+        this.field_147300_g = new WorldClient(this, new WorldSettings(0L, p_147282_1_.func_149198_e(), false, p_147282_1_.func_149195_d(), p_147282_1_.func_149196_i()), net.minecraftforge.fml.common.network.handshake.NetworkDispatcher.get(func_147298_b()).getOverrideDimension(p_147282_1_), p_147282_1_.func_149192_g(), this.field_147299_f.field_71424_I);
         this.field_147299_f.field_71474_y.field_74318_M = p_147282_1_.func_149192_g();
         this.field_147299_f.func_71403_a(this.field_147300_g);
         this.field_147299_f.field_71439_g.field_71093_bK = p_147282_1_.func_149194_f();
@@ -310,11 +305,9 @@
         this.field_147299_f.field_71439_g.func_175150_k(p_147282_1_.func_179744_h());
         this.field_147299_f.field_71442_b.func_78746_a(p_147282_1_.func_149198_e());
         this.field_147299_f.field_71474_y.func_82879_c();
-        this.field_147302_e
-        .func_179290_a(new CPacketCustomPayload("MC|Brand", new PacketBuffer(Unpooled.buffer()).func_180714_a(ClientBrandRetriever.getClientModName())));
+        this.field_147302_e.func_179290_a(new CPacketCustomPayload("MC|Brand", (new PacketBuffer(Unpooled.buffer())).func_180714_a(ClientBrandRetriever.getClientModName())));
     }
 
-    @Override
     public void func_147235_a(SPacketSpawnObject p_147235_1_)
     {
         PacketThreadUtil.func_180031_a(p_147235_1_, this, this.field_147299_f);
@@ -352,15 +345,7 @@
         }
         else if (p_147235_1_.func_148993_l() == 68)
         {
-            entity = new EntityLlamaSpit(
-                this.field_147300_g,
-                d0,
-                d1,
-                d2,
-                (double)p_147235_1_.func_149010_g() / 8000.0,
-                (double)p_147235_1_.func_149004_h() / 8000.0,
-                (double)p_147235_1_.func_148999_i() / 8000.0
-            );
+            entity = new EntityLlamaSpit(this.field_147300_g, d0, d1, d2, (double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
         }
         else if (p_147235_1_.func_148993_l() == 71)
         {
@@ -386,67 +371,27 @@
         }
         else if (p_147235_1_.func_148993_l() == 63)
         {
-            entity = new EntityLargeFireball(
-                this.field_147300_g,
-                d0,
-                d1,
-                d2,
-                (double)p_147235_1_.func_149010_g() / 8000.0,
-                (double)p_147235_1_.func_149004_h() / 8000.0,
-                (double)p_147235_1_.func_148999_i() / 8000.0
-            );
+            entity = new EntityLargeFireball(this.field_147300_g, d0, d1, d2, (double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
             p_147235_1_.func_149002_g(0);
         }
         else if (p_147235_1_.func_148993_l() == 93)
         {
-            entity = new EntityDragonFireball(
-                this.field_147300_g,
-                d0,
-                d1,
-                d2,
-                (double)p_147235_1_.func_149010_g() / 8000.0,
-                (double)p_147235_1_.func_149004_h() / 8000.0,
-                (double)p_147235_1_.func_148999_i() / 8000.0
-            );
+            entity = new EntityDragonFireball(this.field_147300_g, d0, d1, d2, (double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
             p_147235_1_.func_149002_g(0);
         }
         else if (p_147235_1_.func_148993_l() == 64)
         {
-            entity = new EntitySmallFireball(
-                this.field_147300_g,
-                d0,
-                d1,
-                d2,
-                (double)p_147235_1_.func_149010_g() / 8000.0,
-                (double)p_147235_1_.func_149004_h() / 8000.0,
-                (double)p_147235_1_.func_148999_i() / 8000.0
-            );
+            entity = new EntitySmallFireball(this.field_147300_g, d0, d1, d2, (double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
             p_147235_1_.func_149002_g(0);
         }
         else if (p_147235_1_.func_148993_l() == 66)
         {
-            entity = new EntityWitherSkull(
-                this.field_147300_g,
-                d0,
-                d1,
-                d2,
-                (double)p_147235_1_.func_149010_g() / 8000.0,
-                (double)p_147235_1_.func_149004_h() / 8000.0,
-                (double)p_147235_1_.func_148999_i() / 8000.0
-            );
+            entity = new EntityWitherSkull(this.field_147300_g, d0, d1, d2, (double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
             p_147235_1_.func_149002_g(0);
         }
         else if (p_147235_1_.func_148993_l() == 67)
         {
-            entity = new EntityShulkerBullet(
-                this.field_147300_g,
-                d0,
-                d1,
-                d2,
-                (double)p_147235_1_.func_149010_g() / 8000.0,
-                (double)p_147235_1_.func_149004_h() / 8000.0,
-                (double)p_147235_1_.func_148999_i() / 8000.0
-            );
+            entity = new EntityShulkerBullet(this.field_147300_g, d0, d1, d2, (double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
             p_147235_1_.func_149002_g(0);
         }
         else if (p_147235_1_.func_148993_l() == 62)
@@ -455,7 +400,7 @@
         }
         else if (p_147235_1_.func_148993_l() == 79)
         {
-            entity = new EntityEvokerFangs(this.field_147300_g, d0, d1, d2, 0.0F, 0, null);
+            entity = new EntityEvokerFangs(this.field_147300_g, d0, d1, d2, 0.0F, 0, (EntityLivingBase)null);
         }
         else if (p_147235_1_.func_148993_l() == 73)
         {
@@ -473,7 +418,7 @@
         }
         else if (p_147235_1_.func_148993_l() == 50)
         {
-            entity = new EntityTNTPrimed(this.field_147300_g, d0, d1, d2, null);
+            entity = new EntityTNTPrimed(this.field_147300_g, d0, d1, d2, (EntityLivingBase)null);
         }
         else if (p_147235_1_.func_148993_l() == 78)
         {
@@ -530,14 +475,11 @@
                     }
                 }
 
-                entity.func_70016_h(
-                    (double)p_147235_1_.func_149010_g() / 8000.0, (double)p_147235_1_.func_149004_h() / 8000.0, (double)p_147235_1_.func_148999_i() / 8000.0
-                );
+                entity.func_70016_h((double)p_147235_1_.func_149010_g() / 8000.0D, (double)p_147235_1_.func_149004_h() / 8000.0D, (double)p_147235_1_.func_148999_i() / 8000.0D);
             }
         }
     }
 
-    @Override
     public void func_147286_a(SPacketSpawnExperienceOrb p_147286_1_)
     {
         PacketThreadUtil.func_180031_a(p_147286_1_, this, this.field_147299_f);
@@ -552,7 +494,6 @@
         this.field_147300_g.func_73027_a(p_147286_1_.func_148985_c(), entity);
     }
 
-    @Override
     public void func_147292_a(SPacketSpawnGlobalEntity p_147292_1_)
     {
         PacketThreadUtil.func_180031_a(p_147292_1_, this, this.field_147299_f);
@@ -576,18 +517,14 @@
         }
     }
 
-    @Override
     public void func_147288_a(SPacketSpawnPainting p_147288_1_)
     {
         PacketThreadUtil.func_180031_a(p_147288_1_, this, this.field_147299_f);
-        EntityPainting entitypainting = new EntityPainting(
-            this.field_147300_g, p_147288_1_.func_179837_b(), p_147288_1_.func_179836_c(), p_147288_1_.func_148961_h()
-        );
+        EntityPainting entitypainting = new EntityPainting(this.field_147300_g, p_147288_1_.func_179837_b(), p_147288_1_.func_179836_c(), p_147288_1_.func_148961_h());
         entitypainting.func_184221_a(p_147288_1_.func_186895_b());
         this.field_147300_g.func_73027_a(p_147288_1_.func_148965_c(), entitypainting);
     }
 
-    @Override
     public void func_147244_a(SPacketEntityVelocity p_147244_1_)
     {
         PacketThreadUtil.func_180031_a(p_147244_1_, this, this.field_147299_f);
@@ -595,13 +532,10 @@
 
         if (entity != null)
         {
-            entity.func_70016_h(
-                (double)p_147244_1_.func_149411_d() / 8000.0, (double)p_147244_1_.func_149410_e() / 8000.0, (double)p_147244_1_.func_149409_f() / 8000.0
-            );
+            entity.func_70016_h((double)p_147244_1_.func_149411_d() / 8000.0D, (double)p_147244_1_.func_149410_e() / 8000.0D, (double)p_147244_1_.func_149409_f() / 8000.0D);
         }
     }
 
-    @Override
     public void func_147284_a(SPacketEntityMetadata p_147284_1_)
     {
         PacketThreadUtil.func_180031_a(p_147284_1_, this, this.field_147299_f);
@@ -613,7 +547,6 @@
         }
     }
 
-    @Override
     public void func_147237_a(SPacketSpawnPlayer p_147237_1_)
     {
         PacketThreadUtil.func_180031_a(p_147237_1_, this, this.field_147299_f);
@@ -622,9 +555,7 @@
         double d2 = p_147237_1_.func_186899_f();
         float f = (float)(p_147237_1_.func_148941_i() * 360) / 256.0F;
         float f1 = (float)(p_147237_1_.func_148945_j() * 360) / 256.0F;
-        EntityOtherPlayerMP entityotherplayermp = new EntityOtherPlayerMP(
-            this.field_147299_f.field_71441_e, this.func_175102_a(p_147237_1_.func_179819_c()).func_178845_a()
-        );
+        EntityOtherPlayerMP entityotherplayermp = new EntityOtherPlayerMP(this.field_147299_f.field_71441_e, this.func_175102_a(p_147237_1_.func_179819_c()).func_178845_a());
         entityotherplayermp.field_70169_q = d0;
         entityotherplayermp.field_70142_S = d0;
         entityotherplayermp.field_70167_r = d1;
@@ -642,7 +573,6 @@
         }
     }
 
-    @Override
     public void func_147275_a(SPacketEntityTeleport p_147275_1_)
     {
         PacketThreadUtil.func_180031_a(p_147275_1_, this, this.field_147299_f);
@@ -660,9 +590,7 @@
                 float f = (float)(p_147275_1_.func_149450_g() * 360) / 256.0F;
                 float f1 = (float)(p_147275_1_.func_149447_h() * 360) / 256.0F;
 
-                if (!(Math.abs(entity.field_70165_t - d0) >= 0.03125)
-                        && !(Math.abs(entity.field_70163_u - d1) >= 0.015625)
-                        && !(Math.abs(entity.field_70161_v - d2) >= 0.03125))
+                if (Math.abs(entity.field_70165_t - d0) < 0.03125D && Math.abs(entity.field_70163_u - d1) < 0.015625D && Math.abs(entity.field_70161_v - d2) < 0.03125D)
                 {
                     entity.func_180426_a(entity.field_70165_t, entity.field_70163_u, entity.field_70161_v, f, f1, 0, true);
                 }
@@ -676,7 +604,6 @@
         }
     }
 
-    @Override
     public void func_147257_a(SPacketHeldItemChange p_147257_1_)
     {
         PacketThreadUtil.func_180031_a(p_147257_1_, this, this.field_147299_f);
@@ -687,7 +614,6 @@
         }
     }
 
-    @Override
     public void func_147259_a(SPacketEntity p_147259_1_)
     {
         PacketThreadUtil.func_180031_a(p_147259_1_, this, this.field_147299_f);
@@ -695,12 +621,12 @@
 
         if (entity != null)
         {
-            entity.field_70118_ct = entity.field_70118_ct + (long)p_147259_1_.func_186952_a();
-            entity.field_70117_cu = entity.field_70117_cu + (long)p_147259_1_.func_186953_b();
-            entity.field_70116_cv = entity.field_70116_cv + (long)p_147259_1_.func_186951_c();
-            double d0 = (double)entity.field_70118_ct / 4096.0;
-            double d1 = (double)entity.field_70117_cu / 4096.0;
-            double d2 = (double)entity.field_70116_cv / 4096.0;
+            entity.field_70118_ct += (long)p_147259_1_.func_186952_a();
+            entity.field_70117_cu += (long)p_147259_1_.func_186953_b();
+            entity.field_70116_cv += (long)p_147259_1_.func_186951_c();
+            double d0 = (double)entity.field_70118_ct / 4096.0D;
+            double d1 = (double)entity.field_70117_cu / 4096.0D;
+            double d2 = (double)entity.field_70116_cv / 4096.0D;
 
             if (!entity.func_184186_bw())
             {
@@ -712,7 +638,6 @@
         }
     }
 
-    @Override
     public void func_147267_a(SPacketEntityHeadLook p_147267_1_)
     {
         PacketThreadUtil.func_180031_a(p_147267_1_, this, this.field_147299_f);
@@ -725,18 +650,16 @@
         }
     }
 
-    @Override
     public void func_147238_a(SPacketDestroyEntities p_147238_1_)
     {
         PacketThreadUtil.func_180031_a(p_147238_1_, this, this.field_147299_f);
 
-        for (int i = 0; i < p_147238_1_.func_149098_c().length; i++)
+        for (int i = 0; i < p_147238_1_.func_149098_c().length; ++i)
         {
             this.field_147300_g.func_73028_b(p_147238_1_.func_149098_c()[i]);
         }
     }
 
-    @Override
     public void func_184330_a(SPacketPlayerPosLook p_184330_1_)
     {
         PacketThreadUtil.func_180031_a(p_184330_1_, this, this.field_147299_f);
@@ -753,7 +676,7 @@
         }
         else
         {
-            entityplayer.field_70159_w = 0.0;
+            entityplayer.field_70159_w = 0.0D;
         }
 
         if (p_184330_1_.func_179834_f().contains(SPacketPlayerPosLook.EnumFlags.Y))
@@ -762,7 +685,7 @@
         }
         else
         {
-            entityplayer.field_70181_x = 0.0;
+            entityplayer.field_70181_x = 0.0D;
         }
 
         if (p_184330_1_.func_179834_f().contains(SPacketPlayerPosLook.EnumFlags.Z))
@@ -771,7 +694,7 @@
         }
         else
         {
-            entityplayer.field_70179_y = 0.0;
+            entityplayer.field_70179_y = 0.0D;
         }
 
         if (p_184330_1_.func_179834_f().contains(SPacketPlayerPosLook.EnumFlags.X_ROT))
@@ -786,17 +709,7 @@
 
         entityplayer.func_70080_a(d0, d1, d2, f, f1);
         this.field_147302_e.func_179290_a(new CPacketConfirmTeleport(p_184330_1_.func_186965_f()));
-        this.field_147302_e
-        .func_179290_a(
-            new CPacketPlayer.PositionRotation(
-                entityplayer.field_70165_t,
-                entityplayer.func_174813_aQ().field_72338_b,
-                entityplayer.field_70161_v,
-                entityplayer.field_70177_z,
-                entityplayer.field_70125_A,
-                false
-            )
-        );
+        this.field_147302_e.func_179290_a(new CPacketPlayer.PositionRotation(entityplayer.field_70165_t, entityplayer.func_174813_aQ().field_72338_b, entityplayer.field_70161_v, entityplayer.field_70177_z, entityplayer.field_70125_A, false));
 
         if (!this.field_147309_h)
         {
@@ -804,11 +717,10 @@
             this.field_147299_f.field_71439_g.field_70167_r = this.field_147299_f.field_71439_g.field_70163_u;
             this.field_147299_f.field_71439_g.field_70166_s = this.field_147299_f.field_71439_g.field_70161_v;
             this.field_147309_h = true;
-            this.field_147299_f.func_147108_a(null);
+            this.field_147299_f.func_147108_a((GuiScreen)null);
         }
     }
 
-    @Override
     public void func_147287_a(SPacketMultiBlockChange p_147287_1_)
     {
         PacketThreadUtil.func_180031_a(p_147287_1_, this, this.field_147299_f);
@@ -819,7 +731,6 @@
         }
     }
 
-    @Override
     public void func_147263_a(SPacketChunkData p_147263_1_)
     {
         PacketThreadUtil.func_180031_a(p_147263_1_, this, this.field_147299_f);
@@ -829,28 +740,12 @@
             this.field_147300_g.func_73025_a(p_147263_1_.func_149273_e(), p_147263_1_.func_149271_f(), true);
         }
 
-        this.field_147300_g
-        .func_73031_a(
-            p_147263_1_.func_149273_e() << 4,
-            0,
-            p_147263_1_.func_149271_f() << 4,
-            (p_147263_1_.func_149273_e() << 4) + 15,
-            256,
-            (p_147263_1_.func_149271_f() << 4) + 15
-        );
+        this.field_147300_g.func_73031_a(p_147263_1_.func_149273_e() << 4, 0, p_147263_1_.func_149271_f() << 4, (p_147263_1_.func_149273_e() << 4) + 15, 256, (p_147263_1_.func_149271_f() << 4) + 15);
         Chunk chunk = this.field_147300_g.func_72964_e(p_147263_1_.func_149273_e(), p_147263_1_.func_149271_f());
         chunk.func_186033_a(p_147263_1_.func_186946_a(), p_147263_1_.func_149276_g(), p_147263_1_.func_149274_i());
-        this.field_147300_g
-        .func_147458_c(
-            p_147263_1_.func_149273_e() << 4,
-            0,
-            p_147263_1_.func_149271_f() << 4,
-            (p_147263_1_.func_149273_e() << 4) + 15,
-            256,
-            (p_147263_1_.func_149271_f() << 4) + 15
-        );
+        this.field_147300_g.func_147458_c(p_147263_1_.func_149273_e() << 4, 0, p_147263_1_.func_149271_f() << 4, (p_147263_1_.func_149273_e() << 4) + 15, 256, (p_147263_1_.func_149271_f() << 4) + 15);
 
-        if (!p_147263_1_.func_149274_i() || !(this.field_147300_g.field_73011_w instanceof WorldProviderSurface))
+        if (!p_147263_1_.func_149274_i() || this.field_147300_g.field_73011_w.shouldClientCheckLighting())
         {
             chunk.func_76613_n();
         }
@@ -862,44 +757,37 @@
 
             if (tileentity != null)
             {
-                tileentity.func_145839_a(nbttagcompound);
+                tileentity.handleUpdateTag(nbttagcompound);
             }
         }
     }
 
-    @Override
     public void func_184326_a(SPacketUnloadChunk p_184326_1_)
     {
         PacketThreadUtil.func_180031_a(p_184326_1_, this, this.field_147299_f);
         this.field_147300_g.func_73025_a(p_184326_1_.func_186940_a(), p_184326_1_.func_186941_b(), false);
     }
 
-    @Override
     public void func_147234_a(SPacketBlockChange p_147234_1_)
     {
         PacketThreadUtil.func_180031_a(p_147234_1_, this, this.field_147299_f);
         this.field_147300_g.func_180503_b(p_147234_1_.func_179827_b(), p_147234_1_.func_180728_a());
     }
 
-    @Override
     public void func_147253_a(SPacketDisconnect p_147253_1_)
     {
         this.field_147302_e.func_150718_a(p_147253_1_.func_149165_c());
     }
 
-    @Override
     public void func_147231_a(ITextComponent p_147231_1_)
     {
-        this.field_147299_f.func_71403_a(null);
+        this.field_147299_f.func_71403_a((WorldClient)null);
 
         if (this.field_147307_j != null)
         {
             if (this.field_147307_j instanceof GuiScreenRealmsProxy)
             {
-                this.field_147299_f
-                .func_147108_a(
-                    new DisconnectedRealmsScreen(((GuiScreenRealmsProxy)this.field_147307_j).func_154321_a(), "disconnect.lost", p_147231_1_).getProxy()
-                );
+                this.field_147299_f.func_147108_a((new DisconnectedRealmsScreen(((GuiScreenRealmsProxy)this.field_147307_j).func_154321_a(), "disconnect.lost", p_147231_1_)).getProxy());
             }
             else
             {
@@ -917,7 +805,6 @@
         this.field_147302_e.func_179290_a(p_147297_1_);
     }
 
-    @Override
     public void func_147246_a(SPacketCollectItem p_147246_1_)
     {
         PacketThreadUtil.func_180031_a(p_147246_1_, this, this.field_147299_f);
@@ -933,31 +820,11 @@
         {
             if (entity instanceof EntityXPOrb)
             {
-                this.field_147300_g
-                .func_184134_a(
-                    entity.field_70165_t,
-                    entity.field_70163_u,
-                    entity.field_70161_v,
-                    SoundEvents.field_187604_bf,
-                    SoundCategory.PLAYERS,
-                    0.1F,
-                    (this.field_147306_l.nextFloat() - this.field_147306_l.nextFloat()) * 0.35F + 0.9F,
-                    false
-                );
+                this.field_147300_g.func_184134_a(entity.field_70165_t, entity.field_70163_u, entity.field_70161_v, SoundEvents.field_187604_bf, SoundCategory.PLAYERS, 0.1F, (this.field_147306_l.nextFloat() - this.field_147306_l.nextFloat()) * 0.35F + 0.9F, false);
             }
             else
             {
-                this.field_147300_g
-                .func_184134_a(
-                    entity.field_70165_t,
-                    entity.field_70163_u,
-                    entity.field_70161_v,
-                    SoundEvents.field_187638_cR,
-                    SoundCategory.PLAYERS,
-                    0.2F,
-                    (this.field_147306_l.nextFloat() - this.field_147306_l.nextFloat()) * 1.4F + 2.0F,
-                    false
-                );
+                this.field_147300_g.func_184134_a(entity.field_70165_t, entity.field_70163_u, entity.field_70161_v, SoundEvents.field_187638_cR, SoundCategory.PLAYERS, 0.2F, (this.field_147306_l.nextFloat() - this.field_147306_l.nextFloat()) * 1.4F + 2.0F, false);
             }
 
             if (entity instanceof EntityItem)
@@ -970,14 +837,14 @@
         }
     }
 
-    @Override
     public void func_147251_a(SPacketChat p_147251_1_)
     {
         PacketThreadUtil.func_180031_a(p_147251_1_, this, this.field_147299_f);
-        this.field_147299_f.field_71456_v.func_191742_a(p_147251_1_.func_192590_c(), p_147251_1_.func_148915_c());
+        net.minecraft.util.text.ITextComponent message = net.minecraftforge.event.ForgeEventFactory.onClientChat(p_147251_1_.func_192590_c(), p_147251_1_.func_148915_c());
+        if (message == null) return;
+        this.field_147299_f.field_71456_v.func_191742_a(p_147251_1_.func_192590_c(), message);
     }
 
-    @Override
     public void func_147279_a(SPacketAnimation p_147279_1_)
     {
         PacketThreadUtil.func_180031_a(p_147279_1_, this, this.field_147299_f);
@@ -1015,14 +882,12 @@
         }
     }
 
-    @Override
     public void func_147278_a(SPacketUseBed p_147278_1_)
     {
         PacketThreadUtil.func_180031_a(p_147278_1_, this, this.field_147299_f);
         p_147278_1_.func_149091_a(this.field_147300_g).func_180469_a(p_147278_1_.func_179798_a());
     }
 
-    @Override
     public void func_147281_a(SPacketSpawnMob p_147281_1_)
     {
         PacketThreadUtil.func_180031_a(p_147281_1_, this, this.field_147299_f);
@@ -1066,11 +931,10 @@
         }
         else
         {
-            field_147301_d.warn("Skipping Entity with id {}", p_147281_1_.func_149025_e());
+            field_147301_d.warn("Skipping Entity with id {}", (int)p_147281_1_.func_149025_e());
         }
     }
 
-    @Override
     public void func_147285_a(SPacketTimeUpdate p_147285_1_)
     {
         PacketThreadUtil.func_180031_a(p_147285_1_, this, this.field_147299_f);
@@ -1078,7 +942,6 @@
         this.field_147299_f.field_71441_e.func_72877_b(p_147285_1_.func_149365_d());
     }
 
-    @Override
     public void func_147271_a(SPacketSpawnPosition p_147271_1_)
     {
         PacketThreadUtil.func_180031_a(p_147271_1_, this, this.field_147299_f);
@@ -1086,7 +949,6 @@
         this.field_147299_f.field_71441_e.func_72912_H().func_176143_a(p_147271_1_.func_179800_a());
     }
 
-    @Override
     public void func_184328_a(SPacketSetPassengers p_184328_1_)
     {
         PacketThreadUtil.func_180031_a(p_184328_1_, this, this.field_147299_f);
@@ -1111,18 +973,13 @@
 
                     if (entity1 == this.field_147299_f.field_71439_g && !flag)
                     {
-                        this.field_147299_f
-                        .field_71456_v
-                        .func_110326_a(
-                            I18n.func_135052_a("mount.onboard", GameSettings.func_74298_c(this.field_147299_f.field_71474_y.field_74311_E.func_151463_i())), false
-                        );
+                        this.field_147299_f.field_71456_v.func_110326_a(I18n.func_135052_a("mount.onboard", this.field_147299_f.field_71474_y.field_74311_E.getDisplayName()), false);
                     }
                 }
             }
         }
     }
 
-    @Override
     public void func_147243_a(SPacketEntityAttach p_147243_1_)
     {
         PacketThreadUtil.func_180031_a(p_147243_1_, this, this.field_147299_f);
@@ -1142,7 +999,6 @@
         }
     }
 
-    @Override
     public void func_147236_a(SPacketEntityStatus p_147236_1_)
     {
         PacketThreadUtil.func_180031_a(p_147236_1_, this, this.field_147299_f);
@@ -1158,10 +1014,7 @@
             {
                 int i = 40;
                 this.field_147299_f.field_71452_i.func_191271_a(entity, EnumParticleTypes.TOTEM, 30);
-                this.field_147300_g
-                .func_184134_a(
-                    entity.field_70165_t, entity.field_70163_u, entity.field_70161_v, SoundEvents.field_191263_gW, entity.func_184176_by(), 1.0F, 1.0F, false
-                );
+                this.field_147300_g.func_184134_a(entity.field_70165_t, entity.field_70163_u, entity.field_70161_v, SoundEvents.field_191263_gW, entity.func_184176_by(), 1.0F, 1.0F, false);
 
                 if (entity == this.field_147299_f.field_71439_g)
                 {
@@ -1175,7 +1028,6 @@
         }
     }
 
-    @Override
     public void func_147249_a(SPacketUpdateHealth p_147249_1_)
     {
         PacketThreadUtil.func_180031_a(p_147249_1_, this, this.field_147299_f);
@@ -1184,14 +1036,12 @@
         this.field_147299_f.field_71439_g.func_71024_bL().func_75119_b(p_147249_1_.func_149331_e());
     }
 
-    @Override
     public void func_147295_a(SPacketSetExperience p_147295_1_)
     {
         PacketThreadUtil.func_180031_a(p_147295_1_, this, this.field_147299_f);
         this.field_147299_f.field_71439_g.func_71152_a(p_147295_1_.func_149397_c(), p_147295_1_.func_149396_d(), p_147295_1_.func_149395_e());
     }
 
-    @Override
     public void func_147280_a(SPacketRespawn p_147280_1_)
     {
         PacketThreadUtil.func_180031_a(p_147280_1_, this, this.field_147299_f);
@@ -1200,15 +1050,7 @@
         {
             this.field_147309_h = false;
             Scoreboard scoreboard = this.field_147300_g.func_96441_U();
-            this.field_147300_g = new WorldClient(
-                this,
-                new WorldSettings(
-                    0L, p_147280_1_.func_149083_e(), false, this.field_147299_f.field_71441_e.func_72912_H().func_76093_s(), p_147280_1_.func_149080_f()
-                ),
-                p_147280_1_.func_149082_c(),
-                p_147280_1_.func_149081_d(),
-                this.field_147299_f.field_71424_I
-            );
+            this.field_147300_g = new WorldClient(this, new WorldSettings(0L, p_147280_1_.func_149083_e(), false, this.field_147299_f.field_71441_e.func_72912_H().func_76093_s(), p_147280_1_.func_149080_f()), p_147280_1_.func_149082_c(), p_147280_1_.func_149081_d(), this.field_147299_f.field_71424_I);
             this.field_147300_g.func_96443_a(scoreboard);
             this.field_147299_f.func_71403_a(this.field_147300_g);
             this.field_147299_f.field_71439_g.field_71093_bK = p_147280_1_.func_149082_c();
@@ -1219,26 +1061,16 @@
         this.field_147299_f.field_71442_b.func_78746_a(p_147280_1_.func_149083_e());
     }
 
-    @Override
     public void func_147283_a(SPacketExplosion p_147283_1_)
     {
         PacketThreadUtil.func_180031_a(p_147283_1_, this, this.field_147299_f);
-        Explosion explosion = new Explosion(
-            this.field_147299_f.field_71441_e,
-            null,
-            p_147283_1_.func_149148_f(),
-            p_147283_1_.func_149143_g(),
-            p_147283_1_.func_149145_h(),
-            p_147283_1_.func_149146_i(),
-            p_147283_1_.func_149150_j()
-        );
+        Explosion explosion = new Explosion(this.field_147299_f.field_71441_e, (Entity)null, p_147283_1_.func_149148_f(), p_147283_1_.func_149143_g(), p_147283_1_.func_149145_h(), p_147283_1_.func_149146_i(), p_147283_1_.func_149150_j());
         explosion.func_77279_a(true);
-        this.field_147299_f.field_71439_g.field_70159_w = this.field_147299_f.field_71439_g.field_70159_w + (double)p_147283_1_.func_149149_c();
-        this.field_147299_f.field_71439_g.field_70181_x = this.field_147299_f.field_71439_g.field_70181_x + (double)p_147283_1_.func_149144_d();
-        this.field_147299_f.field_71439_g.field_70179_y = this.field_147299_f.field_71439_g.field_70179_y + (double)p_147283_1_.func_149147_e();
+        this.field_147299_f.field_71439_g.field_70159_w += (double)p_147283_1_.func_149149_c();
+        this.field_147299_f.field_71439_g.field_70181_x += (double)p_147283_1_.func_149144_d();
+        this.field_147299_f.field_71439_g.field_70179_y += (double)p_147283_1_.func_149147_e();
     }
 
-    @Override
     public void func_147265_a(SPacketOpenWindow p_147265_1_)
     {
         PacketThreadUtil.func_180031_a(p_147265_1_, this, this.field_147299_f);
@@ -1277,7 +1109,6 @@
         }
     }
 
-    @Override
     public void func_147266_a(SPacketSetSlot p_147266_1_)
     {
         PacketThreadUtil.func_180031_a(p_147266_1_, this, this.field_147299_f);
@@ -1325,7 +1156,6 @@
         }
     }
 
-    @Override
     public void func_147239_a(SPacketConfirmTransaction p_147239_1_)
     {
         PacketThreadUtil.func_180031_a(p_147239_1_, this, this.field_147299_f);
@@ -1347,7 +1177,6 @@
         }
     }
 
-    @Override
     public void func_147241_a(SPacketWindowItems p_147241_1_)
     {
         PacketThreadUtil.func_180031_a(p_147241_1_, this, this.field_147299_f);
@@ -1363,7 +1192,6 @@
         }
     }
 
-    @Override
     public void func_147268_a(SPacketSignEditorOpen p_147268_1_)
     {
         PacketThreadUtil.func_180031_a(p_147268_1_, this, this.field_147299_f);
@@ -1379,7 +1207,6 @@
         this.field_147299_f.field_71439_g.func_175141_a((TileEntitySign)tileentity);
     }
 
-    @Override
     public void func_147273_a(SPacketUpdateTileEntity p_147273_1_)
     {
         PacketThreadUtil.func_180031_a(p_147273_1_, this, this.field_147299_f);
@@ -1390,20 +1217,19 @@
             int i = p_147273_1_.func_148853_f();
             boolean flag = i == 2 && tileentity instanceof TileEntityCommandBlock;
 
-            if (i == 1 && tileentity instanceof TileEntityMobSpawner
-                    || flag
-                    || i == 3 && tileentity instanceof TileEntityBeacon
-                    || i == 4 && tileentity instanceof TileEntitySkull
-                    || i == 5 && tileentity instanceof TileEntityFlowerPot
-                    || i == 6 && tileentity instanceof TileEntityBanner
-                    || i == 7 && tileentity instanceof TileEntityStructure
-                    || i == 8 && tileentity instanceof TileEntityEndGateway
-                    || i == 9 && tileentity instanceof TileEntitySign
-                    || i == 10 && tileentity instanceof TileEntityShulkerBox
-                    || i == 11 && tileentity instanceof TileEntityBed)
+            if (i == 1 && tileentity instanceof TileEntityMobSpawner || flag || i == 3 && tileentity instanceof TileEntityBeacon || i == 4 && tileentity instanceof TileEntitySkull || i == 5 && tileentity instanceof TileEntityFlowerPot || i == 6 && tileentity instanceof TileEntityBanner || i == 7 && tileentity instanceof TileEntityStructure || i == 8 && tileentity instanceof TileEntityEndGateway || i == 9 && tileentity instanceof TileEntitySign || i == 10 && tileentity instanceof TileEntityShulkerBox || i == 11 && tileentity instanceof TileEntityBed)
             {
                 tileentity.func_145839_a(p_147273_1_.func_148857_g());
             }
+            else
+            {
+                if(tileentity == null)
+                {
+                    field_147301_d.error("Received invalid update packet for null tile entity at {} with data: {}", p_147273_1_.func_179823_a(), p_147273_1_.func_148857_g());
+                    return;
+                }
+                tileentity.onDataPacket(field_147302_e, p_147273_1_);
+            }
 
             if (flag && this.field_147299_f.field_71462_r instanceof GuiCommandBlock)
             {
@@ -1412,7 +1238,6 @@
         }
     }
 
-    @Override
     public void func_147245_a(SPacketWindowProperty p_147245_1_)
     {
         PacketThreadUtil.func_180031_a(p_147245_1_, this, this.field_147299_f);
@@ -1424,7 +1249,6 @@
         }
     }
 
-    @Override
     public void func_147242_a(SPacketEntityEquipment p_147242_1_)
     {
         PacketThreadUtil.func_180031_a(p_147242_1_, this, this.field_147299_f);
@@ -1436,30 +1260,24 @@
         }
     }
 
-    @Override
     public void func_147276_a(SPacketCloseWindow p_147276_1_)
     {
         PacketThreadUtil.func_180031_a(p_147276_1_, this, this.field_147299_f);
         this.field_147299_f.field_71439_g.func_175159_q();
     }
 
-    @Override
     public void func_147261_a(SPacketBlockAction p_147261_1_)
     {
         PacketThreadUtil.func_180031_a(p_147261_1_, this, this.field_147299_f);
-        this.field_147299_f
-        .field_71441_e
-        .func_175641_c(p_147261_1_.func_179825_a(), p_147261_1_.func_148868_c(), p_147261_1_.func_148869_g(), p_147261_1_.func_148864_h());
+        this.field_147299_f.field_71441_e.func_175641_c(p_147261_1_.func_179825_a(), p_147261_1_.func_148868_c(), p_147261_1_.func_148869_g(), p_147261_1_.func_148864_h());
     }
 
-    @Override
     public void func_147294_a(SPacketBlockBreakAnim p_147294_1_)
     {
         PacketThreadUtil.func_180031_a(p_147294_1_, this, this.field_147299_f);
         this.field_147299_f.field_71441_e.func_175715_c(p_147294_1_.func_148845_c(), p_147294_1_.func_179821_b(), p_147294_1_.func_148846_g());
     }
 
-    @Override
     public void func_147252_a(SPacketChangeGameState p_147252_1_)
     {
         PacketThreadUtil.func_180031_a(p_147252_1_, this, this.field_147299_f);
@@ -1470,7 +1288,7 @@
 
         if (i >= 0 && i < SPacketChangeGameState.field_149142_a.length && SPacketChangeGameState.field_149142_a[i] != null)
         {
-            entityplayer.func_146105_b(new TextComponentTranslation(SPacketChangeGameState.field_149142_a[i]), false);
+            entityplayer.func_146105_b(new TextComponentTranslation(SPacketChangeGameState.field_149142_a[i], new Object[0]), false);
         }
 
         if (i == 1)
@@ -1496,13 +1314,10 @@
             }
             else if (j == 1)
             {
-                this.field_147299_f
-                .func_147108_a(
-                    new GuiWinGame(
-                        true,
-                        () -> this.field_147299_f.field_71439_g.field_71174_a.func_147297_a(new CPacketClientStatus(CPacketClientStatus.State.PERFORM_RESPAWN))
-                    )
-                );
+                this.field_147299_f.func_147108_a(new GuiWinGame(true, () ->
+                {
+                    this.field_147299_f.field_71439_g.field_71174_a.func_147297_a(new CPacketClientStatus(CPacketClientStatus.State.PERFORM_RESPAWN));
+                }));
             }
         }
         else if (i == 5)
@@ -1515,47 +1330,20 @@
             }
             else if (f == 101.0F)
             {
-                this.field_147299_f
-                .field_71456_v
-                .func_146158_b()
-                .func_146227_a(
-                    new TextComponentTranslation(
-                        "demo.help.movement",
-                        GameSettings.func_74298_c(gamesettings.field_74351_w.func_151463_i()),
-                        GameSettings.func_74298_c(gamesettings.field_74370_x.func_151463_i()),
-                        GameSettings.func_74298_c(gamesettings.field_74368_y.func_151463_i()),
-                        GameSettings.func_74298_c(gamesettings.field_74366_z.func_151463_i())
-                    )
-                );
+                this.field_147299_f.field_71456_v.func_146158_b().func_146227_a(new TextComponentTranslation("demo.help.movement", new Object[] {gamesettings.field_74351_w.getDisplayName(), gamesettings.field_74370_x.getDisplayName(), gamesettings.field_74368_y.getDisplayName(), gamesettings.field_74366_z.getDisplayName()}));
             }
             else if (f == 102.0F)
             {
-                this.field_147299_f
-                .field_71456_v
-                .func_146158_b()
-                .func_146227_a(new TextComponentTranslation("demo.help.jump", GameSettings.func_74298_c(gamesettings.field_74314_A.func_151463_i())));
+                this.field_147299_f.field_71456_v.func_146158_b().func_146227_a(new TextComponentTranslation("demo.help.jump", new Object[] {gamesettings.field_74314_A.getDisplayName()}));
             }
             else if (f == 103.0F)
             {
-                this.field_147299_f
-                .field_71456_v
-                .func_146158_b()
-                .func_146227_a(new TextComponentTranslation("demo.help.inventory", GameSettings.func_74298_c(gamesettings.field_151445_Q.func_151463_i())));
+                this.field_147299_f.field_71456_v.func_146158_b().func_146227_a(new TextComponentTranslation("demo.help.inventory", new Object[] {gamesettings.field_151445_Q.getDisplayName()}));
             }
         }
         else if (i == 6)
         {
-            this.field_147300_g
-            .func_184148_a(
-                entityplayer,
-                entityplayer.field_70165_t,
-                entityplayer.field_70163_u + (double)entityplayer.func_70047_e(),
-                entityplayer.field_70161_v,
-                SoundEvents.field_187734_u,
-                SoundCategory.PLAYERS,
-                0.18F,
-                0.45F
-            );
+            this.field_147300_g.func_184148_a(entityplayer, entityplayer.field_70165_t, entityplayer.field_70163_u + (double)entityplayer.func_70047_e(), entityplayer.field_70161_v, SoundEvents.field_187734_u, SoundCategory.PLAYERS, 0.18F, 0.45F);
         }
         else if (i == 7)
         {
@@ -1567,25 +1355,11 @@
         }
         else if (i == 10)
         {
-            this.field_147300_g
-            .func_175688_a(
-                EnumParticleTypes.MOB_APPEARANCE, entityplayer.field_70165_t, entityplayer.field_70163_u, entityplayer.field_70161_v, 0.0, 0.0, 0.0, new int[0]
-            );
-            this.field_147300_g
-            .func_184148_a(
-                entityplayer,
-                entityplayer.field_70165_t,
-                entityplayer.field_70163_u,
-                entityplayer.field_70161_v,
-                SoundEvents.field_187514_aD,
-                SoundCategory.HOSTILE,
-                1.0F,
-                1.0F
-            );
+            this.field_147300_g.func_175688_a(EnumParticleTypes.MOB_APPEARANCE, entityplayer.field_70165_t, entityplayer.field_70163_u, entityplayer.field_70161_v, 0.0D, 0.0D, 0.0D, new int[0]);
+            this.field_147300_g.func_184148_a(entityplayer, entityplayer.field_70165_t, entityplayer.field_70163_u, entityplayer.field_70161_v, SoundEvents.field_187514_aD, SoundCategory.HOSTILE, 1.0F, 1.0F);
         }
     }
 
-    @Override
     public void func_147264_a(SPacketMaps p_147264_1_)
     {
         PacketThreadUtil.func_180031_a(p_147264_1_, this, this.field_147299_f);
@@ -1614,7 +1388,6 @@
         mapitemrenderer.func_148246_a(mapdata);
     }
 
-    @Override
     public void func_147277_a(SPacketEffect p_147277_1_)
     {
         PacketThreadUtil.func_180031_a(p_147277_1_, this, this.field_147299_f);
@@ -1629,14 +1402,12 @@
         }
     }
 
-    @Override
     public void func_191981_a(SPacketAdvancementInfo p_191981_1_)
     {
         PacketThreadUtil.func_180031_a(p_191981_1_, this, this.field_147299_f);
         this.field_191983_k.func_192799_a(p_191981_1_);
     }
 
-    @Override
     public void func_194022_a(SPacketSelectAdvancementsTab p_194022_1_)
     {
         PacketThreadUtil.func_180031_a(p_194022_1_, this, this.field_147299_f);
@@ -1644,7 +1415,7 @@
 
         if (resourcelocation == null)
         {
-            this.field_191983_k.func_194230_a(null, false);
+            this.field_191983_k.func_194230_a((Advancement)null, false);
         }
         else
         {
@@ -1653,7 +1424,6 @@
         }
     }
 
-    @Override
     public void func_147293_a(SPacketStatistics p_147293_1_)
     {
         PacketThreadUtil.func_180031_a(p_147293_1_, this, this.field_147299_f);
@@ -1661,8 +1431,8 @@
         for (Entry<StatBase, Integer> entry : p_147293_1_.func_148974_c().entrySet())
         {
             StatBase statbase = entry.getKey();
-            int i = entry.getValue();
-            this.field_147299_f.field_71439_g.func_146107_m().func_150873_a(this.field_147299_f.field_71439_g, statbase, i);
+            int k = ((Integer)entry.getValue()).intValue();
+            this.field_147299_f.field_71439_g.func_146107_m().func_150873_a(this.field_147299_f.field_71439_g, statbase, k);
         }
 
         this.field_147308_k = true;
@@ -1673,31 +1443,38 @@
         }
     }
 
-    @Override
     public void func_191980_a(SPacketRecipeBook p_191980_1_)
     {
+        RecipeBook recipebook;
         PacketThreadUtil.func_180031_a(p_191980_1_, this, this.field_147299_f);
-        RecipeBook recipebook = this.field_147299_f.field_71439_g.func_192035_E();
+        recipebook = this.field_147299_f.field_71439_g.func_192035_E();
         recipebook.func_192813_a(p_191980_1_.func_192593_c());
         recipebook.func_192810_b(p_191980_1_.func_192594_d());
         SPacketRecipeBook.State spacketrecipebook$state = p_191980_1_.func_194151_e();
+        label21:
 
         switch (spacketrecipebook$state)
         {
             case REMOVE:
+                Iterator iterator = p_191980_1_.func_192595_a().iterator();
 
-                for (IRecipe irecipe : p_191980_1_.func_192595_a())
+                while (true)
                 {
+                    if (!iterator.hasNext())
+                    {
+                        break label21;
+                    }
+
+                    IRecipe irecipe = (IRecipe)iterator.next();
                     recipebook.func_193831_b(irecipe);
                 }
 
-                break;
             case INIT:
                 p_191980_1_.func_192595_a().forEach(recipebook::func_194073_a);
                 p_191980_1_.func_193644_b().forEach(recipebook::func_193825_e);
                 break;
             case ADD:
-                p_191980_1_.func_192595_a().forEach(p_194025_2_ ->
+                p_191980_1_.func_192595_a().forEach((p_194025_2_) ->
                 {
                     recipebook.func_194073_a(p_194025_2_);
                     recipebook.func_193825_e(p_194025_2_);
@@ -1705,7 +1482,10 @@
                 });
         }
 
-        RecipeBookClient.field_194087_f.forEach(p_194023_1_ -> p_194023_1_.func_194214_a(recipebook));
+        RecipeBookClient.field_194087_f.forEach((p_194023_1_) ->
+        {
+            p_194023_1_.func_194214_a(recipebook);
+        });
 
         if (this.field_147299_f.field_71462_r instanceof IRecipeShownListener)
         {
@@ -1713,7 +1493,6 @@
         }
     }
 
-    @Override
     public void func_147260_a(SPacketEntityEffect p_147260_1_)
     {
         PacketThreadUtil.func_180031_a(p_147260_1_, this, this.field_147299_f);
@@ -1721,20 +1500,17 @@
 
         if (entity instanceof EntityLivingBase)
         {
-            Potion potion = Potion.func_188412_a(p_147260_1_.func_149427_e());
+            Potion potion = Potion.func_188412_a(p_147260_1_.func_149427_e() & 0xFF);
 
             if (potion != null)
             {
-                PotionEffect potioneffect = new PotionEffect(
-                    potion, p_147260_1_.func_180755_e(), p_147260_1_.func_149428_f(), p_147260_1_.func_186984_g(), p_147260_1_.func_179707_f()
-                );
+                PotionEffect potioneffect = new PotionEffect(potion, p_147260_1_.func_180755_e(), p_147260_1_.func_149428_f(), p_147260_1_.func_186984_g(), p_147260_1_.func_179707_f());
                 potioneffect.func_100012_b(p_147260_1_.func_149429_c());
                 ((EntityLivingBase)entity).func_70690_d(potioneffect);
             }
         }
     }
 
-    @Override
     public void func_175098_a(SPacketCombatEvent p_175098_1_)
     {
         PacketThreadUtil.func_180031_a(p_175098_1_, this, this.field_147299_f);
@@ -1750,7 +1526,6 @@
         }
     }
 
-    @Override
     public void func_175101_a(SPacketServerDifficulty p_175101_1_)
     {
         PacketThreadUtil.func_180031_a(p_175101_1_, this, this.field_147299_f);
@@ -1758,7 +1533,6 @@
         this.field_147299_f.field_71441_e.func_72912_H().func_180783_e(p_175101_1_.func_179830_a());
     }
 
-    @Override
     public void func_175094_a(SPacketCamera p_175094_1_)
     {
         PacketThreadUtil.func_180031_a(p_175094_1_, this, this.field_147299_f);
@@ -1770,7 +1544,6 @@
         }
     }
 
-    @Override
     public void func_175093_a(SPacketWorldBorder p_175093_1_)
     {
         PacketThreadUtil.func_180031_a(p_175093_1_, this, this.field_147299_f);
@@ -1778,7 +1551,6 @@
     }
 
     @SuppressWarnings("incomplete-switch")
-    @Override
     public void func_175099_a(SPacketTitle p_175099_1_)
     {
         PacketThreadUtil.func_180031_a(p_175099_1_, this, this.field_147299_f);
@@ -1807,20 +1579,12 @@
         this.field_147299_f.field_71456_v.func_175178_a(s, s1, p_175099_1_.func_179806_c(), p_175099_1_.func_179804_d(), p_175099_1_.func_179803_e());
     }
 
-    @Override
     public void func_175096_a(SPacketPlayerListHeaderFooter p_175096_1_)
     {
-        this.field_147299_f
-        .field_71456_v
-        .func_175181_h()
-        .func_175244_b(p_175096_1_.func_179700_a().func_150254_d().isEmpty() ? null : p_175096_1_.func_179700_a());
-        this.field_147299_f
-        .field_71456_v
-        .func_175181_h()
-        .func_175248_a(p_175096_1_.func_179701_b().func_150254_d().isEmpty() ? null : p_175096_1_.func_179701_b());
+        this.field_147299_f.field_71456_v.func_175181_h().func_175244_b(p_175096_1_.func_179700_a().func_150254_d().isEmpty() ? null : p_175096_1_.func_179700_a());
+        this.field_147299_f.field_71456_v.func_175181_h().func_175248_a(p_175096_1_.func_179701_b().func_150254_d().isEmpty() ? null : p_175096_1_.func_179701_b());
     }
 
-    @Override
     public void func_147262_a(SPacketRemoveEntityEffect p_147262_1_)
     {
         PacketThreadUtil.func_180031_a(p_147262_1_, this, this.field_147299_f);
@@ -1833,7 +1597,6 @@
     }
 
     @SuppressWarnings("incomplete-switch")
-    @Override
     public void func_147256_a(SPacketPlayerListItem p_147256_1_)
     {
         PacketThreadUtil.func_180031_a(p_147256_1_, this, this.field_147299_f);
@@ -1876,26 +1639,23 @@
         }
     }
 
-    @Override
     public void func_147272_a(SPacketKeepAlive p_147272_1_)
     {
         this.func_147297_a(new CPacketKeepAlive(p_147272_1_.func_149134_c()));
     }
 
-    @Override
     public void func_147270_a(SPacketPlayerAbilities p_147270_1_)
     {
         PacketThreadUtil.func_180031_a(p_147270_1_, this, this.field_147299_f);
-        EntityPlayer entityplayer = this.field_147299_f.field_71439_g;
-        entityplayer.field_71075_bZ.field_75100_b = p_147270_1_.func_149106_d();
-        entityplayer.field_71075_bZ.field_75098_d = p_147270_1_.func_149103_f();
-        entityplayer.field_71075_bZ.field_75102_a = p_147270_1_.func_149112_c();
-        entityplayer.field_71075_bZ.field_75101_c = p_147270_1_.func_149105_e();
-        entityplayer.field_71075_bZ.func_75092_a(p_147270_1_.func_149101_g());
-        entityplayer.field_71075_bZ.func_82877_b(p_147270_1_.func_149107_h());
+        EntityPlayer entityplayer1 = this.field_147299_f.field_71439_g;
+        entityplayer1.field_71075_bZ.field_75100_b = p_147270_1_.func_149106_d();
+        entityplayer1.field_71075_bZ.field_75098_d = p_147270_1_.func_149103_f();
+        entityplayer1.field_71075_bZ.field_75102_a = p_147270_1_.func_149112_c();
+        entityplayer1.field_71075_bZ.field_75101_c = p_147270_1_.func_149105_e();
+        entityplayer1.field_71075_bZ.func_75092_a(p_147270_1_.func_149101_g());
+        entityplayer1.field_71075_bZ.func_82877_b(p_147270_1_.func_149107_h());
     }
 
-    @Override
     public void func_147274_a(SPacketTabComplete p_147274_1_)
     {
         PacketThreadUtil.func_180031_a(p_147274_1_, this, this.field_147299_f);
@@ -1908,47 +1668,18 @@
         }
     }
 
-    @Override
     public void func_184327_a(SPacketSoundEffect p_184327_1_)
     {
         PacketThreadUtil.func_180031_a(p_184327_1_, this, this.field_147299_f);
-        this.field_147299_f
-        .field_71441_e
-        .func_184148_a(
-            this.field_147299_f.field_71439_g,
-            p_184327_1_.func_149207_d(),
-            p_184327_1_.func_149211_e(),
-            p_184327_1_.func_149210_f(),
-            p_184327_1_.func_186978_a(),
-            p_184327_1_.func_186977_b(),
-            p_184327_1_.func_149208_g(),
-            p_184327_1_.func_149209_h()
-        );
+        this.field_147299_f.field_71441_e.func_184148_a(this.field_147299_f.field_71439_g, p_184327_1_.func_149207_d(), p_184327_1_.func_149211_e(), p_184327_1_.func_149210_f(), p_184327_1_.func_186978_a(), p_184327_1_.func_186977_b(), p_184327_1_.func_149208_g(), p_184327_1_.func_149209_h());
     }
 
-    @Override
     public void func_184329_a(SPacketCustomSound p_184329_1_)
     {
         PacketThreadUtil.func_180031_a(p_184329_1_, this, this.field_147299_f);
-        this.field_147299_f
-        .func_147118_V()
-        .func_147682_a(
-            new PositionedSoundRecord(
-                new ResourceLocation(p_184329_1_.func_186930_a()),
-                p_184329_1_.func_186929_b(),
-                p_184329_1_.func_186927_f(),
-                p_184329_1_.func_186928_g(),
-                false,
-                0,
-                ISound.AttenuationType.LINEAR,
-                (float)p_184329_1_.func_186932_c(),
-                (float)p_184329_1_.func_186926_d(),
-                (float)p_184329_1_.func_186925_e()
-            )
-        );
+        this.field_147299_f.func_147118_V().func_147682_a(new PositionedSoundRecord(new ResourceLocation(p_184329_1_.func_186930_a()), p_184329_1_.func_186929_b(), p_184329_1_.func_186927_f(), p_184329_1_.func_186928_g(), false, 0, ISound.AttenuationType.LINEAR, (float)p_184329_1_.func_186932_c(), (float)p_184329_1_.func_186926_d(), (float)p_184329_1_.func_186925_e()));
     }
 
-    @Override
     public void func_175095_a(SPacketResourcePackSend p_175095_1_)
     {
         final String s = p_175095_1_.func_179783_a();
@@ -1967,12 +1698,13 @@
                     if (file2.isFile())
                     {
                         this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.ACCEPTED));
-                        Futures.addCallback(this.field_147299_f.func_110438_M().func_177319_a(file2), this.func_189686_f());
+                        Futures.addCallback(this.field_147299_f.func_110438_M().func_177319_a(file2), this.func_189686_f(), Runnable::run);
                         return;
                     }
                 }
-                catch (UnsupportedEncodingException unsupportedencodingexception)
+                catch (UnsupportedEncodingException var7)
                 {
+                    ;
                 }
 
                 this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.FAILED_DOWNLOAD));
@@ -1984,7 +1716,7 @@
                 if (serverdata != null && serverdata.func_152586_b() == ServerData.ServerResourceMode.ENABLED)
                 {
                     this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.ACCEPTED));
-                    Futures.addCallback(this.field_147299_f.func_110438_M().func_180601_a(s, s1), this.func_189686_f());
+                    Futures.addCallback(this.field_147299_f.func_110438_M().func_180601_a(s, s1), this.func_189686_f(), Runnable::run);
                 }
                 else if (serverdata != null && serverdata.func_152586_b() != ServerData.ServerResourceMode.PROMPT)
                 {
@@ -1992,19 +1724,12 @@
                 }
                 else
                 {
-                    this.field_147299_f
-                    .func_152344_a(
-                        new Runnable()
+                    this.field_147299_f.func_152344_a(new Runnable()
                     {
-                        @Override
                         public void run()
                         {
-                            NetHandlerPlayClient.this.field_147299_f
-                            .func_147108_a(
-                                new GuiYesNo(
-                                    new GuiYesNoCallback()
+                            NetHandlerPlayClient.this.field_147299_f.func_147108_a(new GuiYesNo(new GuiYesNoCallback()
                             {
-                                @Override
                                 public void func_73878_a(boolean p_73878_1_, int p_73878_2_)
                                 {
                                     NetHandlerPlayClient.this.field_147299_f = Minecraft.func_71410_x();
@@ -2017,12 +1742,8 @@
                                             serverdata1.func_152584_a(ServerData.ServerResourceMode.ENABLED);
                                         }
 
-                                        NetHandlerPlayClient.this.field_147302_e
-                                        .func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.ACCEPTED));
-                                        Futures.addCallback(
-                                            NetHandlerPlayClient.this.field_147299_f.func_110438_M().func_180601_a(s, s1),
-                                            NetHandlerPlayClient.this.func_189686_f()
-                                        );
+                                        NetHandlerPlayClient.this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.ACCEPTED));
+                                        Futures.addCallback(NetHandlerPlayClient.this.field_147299_f.func_110438_M().func_180601_a(s, s1), NetHandlerPlayClient.this.func_189686_f(), Runnable::run);
                                     }
                                     else
                                     {
@@ -2031,22 +1752,15 @@
                                             serverdata1.func_152584_a(ServerData.ServerResourceMode.DISABLED);
                                         }
 
-                                        NetHandlerPlayClient.this.field_147302_e
-                                        .func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.DECLINED));
+                                        NetHandlerPlayClient.this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.DECLINED));
                                     }
 
                                     ServerList.func_147414_b(serverdata1);
-                                    NetHandlerPlayClient.this.field_147299_f.func_147108_a(null);
+                                    NetHandlerPlayClient.this.field_147299_f.func_147108_a((GuiScreen)null);
                                 }
-                            },
-                            I18n.func_135052_a("multiplayer.texturePrompt.line1"),
-                            I18n.func_135052_a("multiplayer.texturePrompt.line2"),
-                            0
-                                )
-                            );
+                            }, I18n.func_135052_a("multiplayer.texturePrompt.line1"), I18n.func_135052_a("multiplayer.texturePrompt.line2"), 0));
                         }
-                    }
-                    );
+                    });
                 }
             }
         }
@@ -2073,7 +1787,7 @@
                 throw new URISyntaxException(p_189688_1_, "Invalid levelstorage resourcepack path");
             }
         }
-        catch (URISyntaxException urisyntaxexception)
+        catch (URISyntaxException var5)
         {
             this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.FAILED_DOWNLOAD));
             return false;
@@ -2084,12 +1798,10 @@
     {
         return new FutureCallback<Object>()
         {
-            @Override
             public void onSuccess(@Nullable Object p_onSuccess_1_)
             {
                 NetHandlerPlayClient.this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.SUCCESSFULLY_LOADED));
             }
-            @Override
             public void onFailure(Throwable p_onFailure_1_)
             {
                 NetHandlerPlayClient.this.field_147302_e.func_179290_a(new CPacketResourcePackStatus(CPacketResourcePackStatus.Action.FAILED_DOWNLOAD));
@@ -2097,14 +1809,12 @@
         };
     }
 
-    @Override
     public void func_184325_a(SPacketUpdateBossInfo p_184325_1_)
     {
         PacketThreadUtil.func_180031_a(p_184325_1_, this, this.field_147299_f);
         this.field_147299_f.field_71456_v.func_184046_j().func_184055_a(p_184325_1_);
     }
 
-    @Override
     public void func_184324_a(SPacketCooldown p_184324_1_)
     {
         PacketThreadUtil.func_180031_a(p_184324_1_, this, this.field_147299_f);
@@ -2119,7 +1829,6 @@
         }
     }
 
-    @Override
     public void func_184323_a(SPacketMoveVehicle p_184323_1_)
     {
         PacketThreadUtil.func_180031_a(p_184323_1_, this, this.field_147299_f);
@@ -2127,14 +1836,11 @@
 
         if (entity != this.field_147299_f.field_71439_g && entity.func_184186_bw())
         {
-            entity.func_70080_a(
-                p_184323_1_.func_186957_a(), p_184323_1_.func_186955_b(), p_184323_1_.func_186956_c(), p_184323_1_.func_186959_d(), p_184323_1_.func_186958_e()
-            );
+            entity.func_70080_a(p_184323_1_.func_186957_a(), p_184323_1_.func_186955_b(), p_184323_1_.func_186956_c(), p_184323_1_.func_186959_d(), p_184323_1_.func_186958_e());
             this.field_147302_e.func_179290_a(new CPacketVehicleMove(entity));
         }
     }
 
-    @Override
     public void func_147240_a(SPacketCustomPayload p_147240_1_)
     {
         PacketThreadUtil.func_180031_a(p_147240_1_, this, this.field_147299_f);
@@ -2145,10 +1851,10 @@
 
             try
             {
-                int i = packetbuffer.readInt();
+                int k = packetbuffer.readInt();
                 GuiScreen guiscreen = this.field_147299_f.field_71462_r;
 
-                if (guiscreen != null && guiscreen instanceof GuiMerchant && i == this.field_147299_f.field_71439_g.field_71070_bA.field_75152_c)
+                if (guiscreen != null && guiscreen instanceof GuiMerchant && k == this.field_147299_f.field_71439_g.field_71070_bA.field_75152_c)
                 {
                     IMerchant imerchant = ((GuiMerchant)guiscreen).func_147035_g();
                     MerchantRecipeList merchantrecipelist = MerchantRecipeList.func_151390_b(packetbuffer);
@@ -2161,6 +1867,7 @@
             }
             finally
             {
+                if (false) // Forge: let packet handle releasing buffer
                 packetbuffer.release();
             }
         }
@@ -2170,10 +1877,8 @@
         }
         else if ("MC|BOpen".equals(p_147240_1_.func_149169_c()))
         {
-            EnumHand enumhand = p_147240_1_.func_180735_b().func_179257_a(EnumHand.class);
-            ItemStack itemstack = enumhand == EnumHand.OFF_HAND
-                                  ? this.field_147299_f.field_71439_g.func_184592_cb()
-                                  : this.field_147299_f.field_71439_g.func_184614_ca();
+            EnumHand enumhand = (EnumHand)p_147240_1_.func_180735_b().func_179257_a(EnumHand.class);
+            ItemStack itemstack = enumhand == EnumHand.OFF_HAND ? this.field_147299_f.field_71439_g.func_184592_cb() : this.field_147299_f.field_71439_g.func_184614_ca();
 
             if (itemstack.func_77973_b() == Items.field_151164_bB)
             {
@@ -2183,17 +1888,17 @@
         else if ("MC|DebugPath".equals(p_147240_1_.func_149169_c()))
         {
             PacketBuffer packetbuffer1 = p_147240_1_.func_180735_b();
-            int j = packetbuffer1.readInt();
-            float f = packetbuffer1.readFloat();
+            int l = packetbuffer1.readInt();
+            float f1 = packetbuffer1.readFloat();
             Path path = Path.func_186311_b(packetbuffer1);
-            ((DebugRendererPathfinding)this.field_147299_f.field_184132_p.field_188286_a).func_188289_a(j, path, f);
+            ((DebugRendererPathfinding)this.field_147299_f.field_184132_p.field_188286_a).func_188289_a(l, path, f1);
         }
         else if ("MC|DebugNeighborsUpdate".equals(p_147240_1_.func_149169_c()))
         {
             PacketBuffer packetbuffer2 = p_147240_1_.func_180735_b();
-            long k = packetbuffer2.func_179260_f();
+            long i1 = packetbuffer2.func_179260_f();
             BlockPos blockpos = packetbuffer2.func_179259_c();
-            ((DebugRendererNeighborsUpdate)this.field_147299_f.field_184132_p.field_191557_f).func_191553_a(k, blockpos);
+            ((DebugRendererNeighborsUpdate)this.field_147299_f.field_184132_p.field_191557_f).func_191553_a(i1, blockpos);
         }
         else if ("MC|StopSound".equals(p_147240_1_.func_149169_c()))
         {
@@ -2204,7 +1909,6 @@
         }
     }
 
-    @Override
     public void func_147291_a(SPacketScoreboardObjective p_147291_1_)
     {
         PacketThreadUtil.func_180031_a(p_147291_1_, this, this.field_147299_f);
@@ -2232,7 +1936,6 @@
         }
     }
 
-    @Override
     public void func_147250_a(SPacketUpdateScore p_147250_1_)
     {
         PacketThreadUtil.func_180031_a(p_147250_1_, this, this.field_147299_f);
@@ -2248,7 +1951,7 @@
         {
             if (StringUtils.func_151246_b(p_147250_1_.func_149321_d()))
             {
-                scoreboard.func_178822_d(p_147250_1_.func_149324_c(), null);
+                scoreboard.func_178822_d(p_147250_1_.func_149324_c(), (ScoreObjective)null);
             }
             else if (scoreobjective != null)
             {
@@ -2257,7 +1960,6 @@
         }
     }
 
-    @Override
     public void func_147254_a(SPacketDisplayObjective p_147254_1_)
     {
         PacketThreadUtil.func_180031_a(p_147254_1_, this, this.field_147299_f);
@@ -2265,7 +1967,7 @@
 
         if (p_147254_1_.func_149370_d().isEmpty())
         {
-            scoreboard.func_96530_a(p_147254_1_.func_149371_c(), null);
+            scoreboard.func_96530_a(p_147254_1_.func_149371_c(), (ScoreObjective)null);
         }
         else
         {
@@ -2274,7 +1976,6 @@
         }
     }
 
-    @Override
     public void func_147247_a(SPacketTeams p_147247_1_)
     {
         PacketThreadUtil.func_180031_a(p_147247_1_, this, this.field_147299_f);
@@ -2334,7 +2035,6 @@
         }
     }
 
-    @Override
     public void func_147289_a(SPacketParticles p_147289_1_)
     {
         PacketThreadUtil.func_180031_a(p_147289_1_, this, this.field_147299_f);
@@ -2347,27 +2047,16 @@
 
             try
             {
-                this.field_147300_g
-                .func_175682_a(
-                    p_147289_1_.func_179749_a(),
-                    p_147289_1_.func_179750_b(),
-                    p_147289_1_.func_149220_d(),
-                    p_147289_1_.func_149226_e(),
-                    p_147289_1_.func_149225_f(),
-                    d0,
-                    d2,
-                    d4,
-                    p_147289_1_.func_179748_k()
-                );
+                this.field_147300_g.func_175682_a(p_147289_1_.func_179749_a(), p_147289_1_.func_179750_b(), p_147289_1_.func_149220_d(), p_147289_1_.func_149226_e(), p_147289_1_.func_149225_f(), d0, d2, d4, p_147289_1_.func_179748_k());
             }
-            catch (Throwable throwable1)
+            catch (Throwable var17)
             {
-                field_147301_d.warn("Could not spawn particle effect {}", p_147289_1_.func_179749_a());
+                field_147301_d.warn("Could not spawn particle effect {}", (Object)p_147289_1_.func_179749_a());
             }
         }
         else
         {
-            for (int i = 0; i < p_147289_1_.func_149222_k(); i++)
+            for (int k = 0; k < p_147289_1_.func_149222_k(); ++k)
             {
                 double d1 = this.field_147306_l.nextGaussian() * (double)p_147289_1_.func_149221_g();
                 double d3 = this.field_147306_l.nextGaussian() * (double)p_147289_1_.func_149224_h();
@@ -2378,29 +2067,17 @@
 
                 try
                 {
-                    this.field_147300_g
-                    .func_175682_a(
-                        p_147289_1_.func_179749_a(),
-                        p_147289_1_.func_179750_b(),
-                        p_147289_1_.func_149220_d() + d1,
-                        p_147289_1_.func_149226_e() + d3,
-                        p_147289_1_.func_149225_f() + d5,
-                        d6,
-                        d7,
-                        d8,
-                        p_147289_1_.func_179748_k()
-                    );
+                    this.field_147300_g.func_175682_a(p_147289_1_.func_179749_a(), p_147289_1_.func_179750_b(), p_147289_1_.func_149220_d() + d1, p_147289_1_.func_149226_e() + d3, p_147289_1_.func_149225_f() + d5, d6, d7, d8, p_147289_1_.func_179748_k());
                 }
-                catch (Throwable throwable)
+                catch (Throwable var16)
                 {
-                    field_147301_d.warn("Could not spawn particle effect {}", p_147289_1_.func_179749_a());
+                    field_147301_d.warn("Could not spawn particle effect {}", (Object)p_147289_1_.func_179749_a());
                     return;
                 }
             }
         }
     }
 
-    @Override
     public void func_147290_a(SPacketEntityProperties p_147290_1_)
     {
         PacketThreadUtil.func_180031_a(p_147290_1_, this, this.field_147299_f);
@@ -2422,9 +2099,7 @@
 
                     if (iattributeinstance == null)
                     {
-                        iattributeinstance = abstractattributemap.func_111150_b(
-                                                 new RangedAttribute(null, spacketentityproperties$snapshot.func_151409_a(), 0.0, Double.MIN_NORMAL, Double.MAX_VALUE)
-                                             );
+                        iattributeinstance = abstractattributemap.func_111150_b(new RangedAttribute((IAttribute)null, spacketentityproperties$snapshot.func_151409_a(), 0.0D, -Double.MAX_VALUE, Double.MAX_VALUE)); // Forge: fix invalid value range (MC-150405)
                     }
 
                     iattributeinstance.func_111128_a(spacketentityproperties$snapshot.func_151410_b());
@@ -2439,7 +2114,6 @@
         }
     }
 
-    @Override
     public void func_194307_a(SPacketPlaceGhostRecipe p_194307_1_)
     {
         PacketThreadUtil.func_180031_a(p_194307_1_, this, this.field_147299_f);
