--- before/net/minecraft/client/network/NetHandlerLoginClient.java
+++ after/net/minecraft/client/network/NetHandlerLoginClient.java
@@ -118,7 +118,10 @@
     {
         this.gameProfile = packetIn.getProfile();
         this.networkManager.setConnectionState(EnumConnectionState.PLAY);
-        this.networkManager.setNetHandler(new NetHandlerPlayClient(this.mc, this.previousGuiScreen, this.networkManager, this.gameProfile));
+        NetHandlerPlayClient nhpc = new NetHandlerPlayClient(this.mc, this.previousGuiScreen, this.networkManager, this.gameProfile);
+        this.networkManager.setNetHandler(nhpc);
+        net.minecraftforge.fml.client.FMLClientHandler.instance().setPlayClient(nhpc);
+        net.minecraftforge.fml.common.network.internal.FMLNetworkHandler.fmlClientHandshake(this.networkManager);
     }
 
     @Override
